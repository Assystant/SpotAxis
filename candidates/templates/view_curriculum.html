{% extends "base/base.html" %}
{% load i18n %}
{% load TRM_tags %}
{% load humanize %}
{% block meta %}
    <meta name="keyword" content="SpotAxis, Talent Profile, {{candidate.first_name}} {{candidate.last_name}}"/>
    <meta name="description" content="Talent Profile page for {{candidate.first_name}} {{candidate.last_name}} on SpotAxis"/>
{% endblock %}
{% block title %}SpotAxis | {{ candidate.first_name }} {{ candidate.last_name }}{% endblock %}
{% comment %} Page to view and edit a candidate's resume. {% endcomment %}
{% block css %}
    <link href="{{STATIC_URL}}datepicker/css/datepicker3.css" rel="stylesheet" type="text/css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/switchery/0.8.1/switchery.min.css">
    <style>
        body{
            padding-bottom: 10px;
        }
    </style>
{% endblock %}
{% block page-header %}{{ candidate.first_name }} {{ candidate.last_name }}{% endblock %}
{% block content %}
<!-- Content starts -->
    {# -- Start Modals -- #}
    <div class="container-fluid" >
        <div class="row">
            <div class="col-xs-12 affix-top z500" data-spy="affix" data-offset-top="190">
                <div class="row bg-white pl20 pr20 border-bottom border-light pt5" id="profile" >
                    <div class="col-xs-12 col-sm-10 mt20 col-sm-push-1 no-affix no-padding">
                        <div class="inline-block va-top mb20">
                            <img class="img-responsive inline-block user-photo bordered br-2" src="{{MEDIA_URL}}{{candidate.user.photo|default:settings.PHOTO_USER_DEFAULT}}" alt="{{candidate.full_name}} Photo" data-name="{{candidate.full_name}}">
                        </div>
                        <div class="inline-block ml40 mb20">
                            <h2 class="text-light no-margin-y"> {{candidate.full_name}}<small><small></small></small> </h2>
                            <span><i class="fa fa-envelope"></i> <a href="mailto:{%if not candidate.user %}{{candidate.public_email}}{%else%}{{ candidate.user.email }}{%endif%}">{% if not candidate.user %}{{candidate.public_email}}{%else%}{{ candidate.user.email }}{%endif%}</a><br></span>
                            {% if candidate.user %}
                                {% if candidate.city or candidate.state or candidate.nationality %}<span><i class="fa fa-map-marker"></i> {{candidate.city|add:', '|default:''}}{{candidate.state|add:', '|default:''}}{{candidate.nationality}}</span><br>{% endif %}
                                {% if candidate.birthday %}<span><i class="fa fa-birthday-cake"></i> {{candidate.birthday|default:'Not Provided'}}</span>{% endif %}{% if candidate.birthday and candidate.gender %} - {% endif %}
                                {% if candidate.gender %}<span><i class="fa fa-user"></i> {{candidate.gender|default:'Not Provided'}}</span>{%endif %}{% if candidate.gender and candidate.maritalStatus %} - {%endif %}
                                {% if candidate.maritalStatus %}<span><i class="fa fa-venus-mars"></i> {{candidate.maritalStatus|default:'Not Provided'}}</span>{% endif %}{% if candidate.gender or candidate.maritalStatus or candidate.birthday %}<br>{% endif %}
                                <span class="{% if not candidate.phone %}hidden{%endif%}"> <i class="fa fa-phone"></i> <span id="profile_phone"> {{ candidate.phone }}</span></span>{% if candidate.phone and candidate.cellphone%} - {% endif %} <span class="{% if not candidate.cellphone%}hidden{%endif%}"><i class="fa fa-mobile"></i> <span id="profile_cellphone"> {{ candidate.cellphone }}</span><br></span>
                                <span>
                                    <ul class="social-icons clearfix list-inline {% if not candidate.facebook and not candidate.linkedin and not candidate.google and not candidate.twitter%}hidden{%endif%}">
                                        <li class="no-padding"><a id="profile_linkedin" href="{{ candidate.linkedin }}" target="_blank" class="btn btn-default btn-round {% if not candidate.linkedin %}hidden{%endif%}"><i class="fa fa-linkedin mt10"></i></a></li>
                                        <li class="no-padding"><a id="profile_facebook" href="{{ candidate.facebook }}" target="_blank" class="btn btn-default btn-round {% if not candidate.facebook %}hidden{%endif%}"><i class="fa fa-facebook mt10"></i></a></li>
                                        <li class="no-padding"><a id="profile_twitter" href="https://www.twitter.com/{{ candidate.twitter }}" target="_blank" class="btn btn-default btn-round {% if not candidate.twitter %}hidden{%endif%}"><i class="fa fa-twitter mt10"></i></a></li>
                                        <li class="no-padding"><a id="profile_google" href="{{ candidate.google }}" target="_blank" class="btn btn-default btn-round {% if not candidate.google %}hidden{%endif%}"><i class="fa fa-google-plus mt10"></i></a></li>
                                    </ul>
                                </span>
                            {% endif %}
                        </div>
                    </div>
                    <div class="col-xs-12 bg-white no-padding affix-px15 border-light">
                        <ul class="nav nav-tabs border-light no-border">
                            {%if not candidate.user == request.user and not candidate.objective and not candidate.skills and not expertises and not academics and not trainings and not certificates and not projects and not languages and not candidate.interests and not candidate.hobbies and not candidate.extra_curriculars and not candidate.others %}{%else%}<li role="presentation" class="active"><a class="border-light pb8" data-toggle="tab" href="#profile-tab" id="profile-pill">Profile</a></li>{%endif%}
                            <li role="presentation"><a class="border-light pb8" data-toggle="tab" href="#history-tab" id="history-pill" >History</a></li>
                            {% if curriculum.file %}
                                <li role="presentation"><a class="border-light pb8" data-toggle="tab" href="#attachment-tab" id="attachment-pill">Attachment</a></li>
                            {% endif %}
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-xs-12 tab-content affix-mt-200">
                {%if not candidate.user == request.user and not candidate.objective and not candidate.skills and not expertises and not academics and not trainings and not certificates and not projects and not languages and not candidate.interests and not candidate.hobbies and not candidate.extra_curriculars and not candidate.others %}
                {%else%}
                <div class="row tab-pane fade in" id="profile-tab">
                    <div class="hidden-xs hidden-sm col-md-2 col-md-push-10">
                        <nav class="affix-top mt40 pt40" data-spy="affix" data-offset-top="190" >
                            <a class="btn btn-default btn-block mb20" href="{% url 'vacancies_curriculum_to_pdf' candidate.id %}">Download Profile</a>
                            {% if recruiter %}
                                <h6 class="text-center mb20"> <i class="fa fa-flag-checkered"></i> &nbsp;<small class="text-light">Current Job and Process</small> <br>
                                    <span class="text-center">
                                            {% if postulate.vacancy_stage %}{{postulate.vacancy_stage}}{% else %}
                                                {% if postulate.finalize %}Onboarding{%else%}New Candidates{% endif %}
                                            {% endif %}
                                            <br>
                                            {%if postulate.discard %} (Archived) {% elif not postulate.finalize %} (In Process) {%endif%}
                                            <br>for Job - <a href="{{postulate.vacancy.get_absolute_url}}">{{postulate.vacancy}}</a>
                                    </span>
                                </h6>
                            {% endif %}
                            {% if recruiter.is_manager or isProcessManager %}
                                {% if postulate.vacancy.status.codename == 'open' and not postulate.discard %}
                                    {% if not postulate.discard and not postulate.vacancy_stage.order == 100 %}
                                        <button class="btn btn-sm btn-info btn-block send-to-next">Move to Next Process</button>
                                    {% endif %}
                                    {% if not postulate.discard and not postulate.vacancy_stage.order == 0 %}
                                        <button class="btn btn-sm btn-default btn-block send-to-back">Move to Prev Process</button>
                                    {% endif %}
                                    {% if not postulate.discard and not postulate.vacancy_stage.order == 100 %}
                                        <button class="btn btn-sm btn-default btn-block send-to-archive">Archive</button>
                                    {% endif %}
                                {% endif %}
                            {% endif %}
                        </nav>
                    </div>
                    <div class="col-sm-3 col-md-2 col-md-pull-2 hidden-xs">
                        <nav class="affix-top mt40 pt40" data-spy="affix" data-offset-top="190" data-offset-bottom="50" id="navbar_short">
                            <ul class="nav timeline timeline-fix"  >
                                <!-- Item 1 and 2 -->
                                <li class="hidden">
                                    <a class="direction-r" href="#profile">
                                        <div class="flag-wrapper">
                                            <span class="flag">Personal Profile</span>
                                            <span class="time-wrapper hidden"><span class="time"></span></span>
                                        </div>
                                    </a>
                                </li>
                                <!-- Item 3 -->
                                <li class="{%if not candidate.user == request.user and not candidate.objective and not candidate.skills %}hidden{%endif%}">
                                    <a class="direction-r" href="#objective-section">
                                        <div class="flag-wrapper">
                                            <span class="flag">Objective and Skills</span>
                                            <span class="time-wrapper hidden"><span class="time"></span></span>
                                        </div>
                                    </a>
                                </li>
                                <!-- Item 4 -->
                                <li class="{%if not candidate.user == request.user and not expertises %}hidden{%endif%}">
                                    <a class="direction-r" href="#experience-section">
                                        <div class="flag-wrapper">
                                            <span class="flag">Experience</span>
                                            <span class="time-wrapper hidden"><span class="time"></span></span>
                                        </div>
                                    </a>
                                </li>
                                <!-- Item 5 -->
                                <li class="{%if not candidate.user == request.user and not academics %}hidden{%endif%}">
                                    <a class="direction-r" href="#academic-section">
                                        <div class="flag-wrapper">
                                            <span class="flag">Education</span>
                                            <span class="time-wrapper hidden"><span class="time"></span></span>
                                        </div>
                                    </a>
                                </li>
                                <!-- Item 6 -->
                                <li class="{%if not candidate.user == request.user and not trainings %}hidden{%endif%}">
                                    <a class="direction-r" href="#training-section">
                                        <div class="flag-wrapper">
                                            <span class="flag">Trainings</span>
                                            <span class="time-wrapper hidden"><span class="time"></span></span>
                                        </div>
                                    </a>
                                </li>
                                <!-- Item 7 -->
                                <li class="{%if not candidate.user == request.user and not certificates %}hidden{%endif%}">
                                    <a class="direction-r" href="#certificate-section">
                                        <div class="flag-wrapper">
                                            <span class="flag">Certifications</span>
                                            <span class="time-wrapper hidden"><span class="time"></span></span>
                                        </div>
                                    </a>
                                </li>
                                <!-- Item 8 -->
                                <li class="{%if not candidate.user == request.user and not projects %}hidden{%endif%}">
                                    <a class="direction-r" href="#project-section">
                                        <div class="flag-wrapper">
                                            <span class="flag">Projects</span>
                                            <span class="time-wrapper hidden"><span class="time"></span></span>
                                        </div>
                                    </a>
                                </li>
                                <!-- Item 9 -->
                                <li class="{%if not candidate.user == request.user and not languages %}hidden{%endif%}">
                                    <a class="direction-r" href="#language-section">
                                        <div class="flag-wrapper">
                                            <span class="flag">Languages</span>
                                            <span class="time-wrapper hidden"><span class="time"></span></span>
                                        </div>
                                    </a>
                                </li>
                                <!-- Item 10 -->
                                <li class="{% if not candidate.user == request.user and not candidate.interests %}hidden{% endif %}">
                                    <a class="direction-r" href="#interests-section">
                                        <div class="flag-wrapper">
                                            <span class="flag">Interests</span>
                                            <span class="time-wrapper hidden"><span class="time"></span></span>
                                        </div>
                                    </a>
                                </li>
                                <!-- Item 11 -->
                                <li class="{% if not candidate.user == request.user and not candidate.hobbies %}hidden{% endif %}">
                                    <a class="direction-r" href="#hobbies-section">
                                        <div class="flag-wrapper">
                                            <span class="flag">Hobbies</span>
                                            <span class="time-wrapper hidden"><span class="time"></span></span>
                                        </div>
                                    </a>
                                </li>
                                <!-- Item 12 -->
                                <li class="{% if not candidate.user == request.user and not candidate.extra_curriculars %}hidden{% endif %}">
                                    <a class="direction-r" href="#extra-curriculars-section">
                                        <div class="flag-wrapper">
                                            <span class="flag">Extra Curriculars</span>
                                            <span class="time-wrapper hidden"><span class="time"></span></span>
                                        </div>
                                    </a>
                                </li>
                                <!-- Item 13 -->
                                <li class="{% if not candidate.user == request.user and not candidate.others %}hidden{% endif %}">
                                    <a class="direction-r" href="#others-section">
                                        <div class="flag-wrapper">
                                            <span class="flag">Others</span>
                                            <span class="time-wrapper hidden"><span class="time"></span></span>
                                        </div>
                                    </a>
                                </li>
                                <!-- Item 14 -->
                                <li class="hidden {%if not candidate.user == request.user and not curriculum.file %}hidden{%endif%}">
                                    <a class="direction-r" href="#attachment-section">
                                        <div class="flag-wrapper">
                                            <span class="flag">Attachments</span>
                                            <span class="time-wrapper hidden"><span class="time"></span></span>
                                        </div>
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                    <div class="col-sm-9 col-md-8 col-md-pull-2 mb40" id="spysection">
                        <section class="pt20 container-fluid text-muted {%if not candidate.user == request.user and not candidate.objective and not candidate.skills %}hidden{%endif%}" id="objective-section">
                            <div class="row objective-skills collapse fade in">
                                <div class="col-xs-12 text-center no-padding">
                                    <h3 class="text-light text-center">Objective and Skills</h3>
                                    {%if not company%}
                                        <h6 class="text-center"><span><a class="clickable" data-toggle="collapse" data-target=".objective-skills"><i class="fa fa-pencil"></i> Update</a></span></h6>
                                    {%endif%}

                                    <div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20">
                                        <div class="row">
                                            <p class="lead text-muted"><i class="fa fa-quote-left"></i> <span id="profile_objective">{{ candidate.objective|default:'No Objective' }}</span> <i class="fa fa-quote-right"></i></p>
                                        </div>
                                        <div class="row text-center" id="profile_skills">
                                            {%if not candidate.skills %}
                                                <h6 class="text-center">No Skills added yet</h6>
                                            {%else%}
                                                {% for skill in candidate.skills|split:',' %}
                                                    {%if forloop.counter == 9%}
                                                        <div class="col-md-4 mb10 collapse fade in skills">
                                                            <a href="javascript:void(0)" data-toggle="collapse" data-target=".skills">more...</a>
                                                        </div>
                                                    {%endif%}
                                                    {%if forloop.counter < 9%}
                                                        <div class="col-md-4 mb10">
                                                            <i class="material-icons">label</i> <span class="va-top">{{skill}}</span>
                                                        </div>
                                                    {%else%}
                                                        <div class="col-md-4 mb10 collapse fade skills">
                                                            <i class="material-icons">label</i> <span class="va-top">{{skill}}</span>
                                                        </div>
                                                    {%endif%}
                                                    {%if forloop.counter|divisibleby:3%}
                                                        <div class="clearfix"></div>
                                                    {%endif%}
                                                {%endfor%}
                                            {%endif%}
                                            <div class="clearfix col-md-12"></div>
                                        </div>
                                    </div>
                                </div>     
                            </div>
                            <div class="row objective-skills collapse fade">
                                <div class="col-xs-12 no-padding">
                                    <form id="objective-form" enctype="multipart/form-data" action="." method="post" role="form" class="mt10">
                                        {%csrf_token%}
                                        <div class="row">
                                            <div class="col-xs-12">
                                                <h3 class="text-light text-center">{% trans 'Objectives and Skills' %}</h3>
                                            </div>
                                        </div>

                                        <div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20">
                                            <div class="row">
                                            <!-- Professional Objective -->
                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        {% if form_objective.objective.errors %}
                                                            <ul class="list-unstyled error-list">
                                                            {% for error in form_objective.objective.errors %}
                                                                <li>{{ error|escape }}</li>
                                                            {% endfor %}
                                                            </ul>
                                                        {% else %}
                                                            <label for="id_objective">{% trans 'Share your objectives' %}<span class="required">*</span></label>
                                                        {% endif %}
                                                        <div class="{% if form_objective.objective.errors %}has-error{% endif %}">
                                                            {{ form_objective.objective }}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                            <!-- Professional Skills -->
                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        {% if form_objective.skills.errors %}
                                                            <ul class="list-unstyled error-list">
                                                            {% for error in form_objective.skills.errors %}
                                                                <li>{{ error|escape }}</li>
                                                            {% endfor %}
                                                            </ul>
                                                        {% else %}
                                                            <label for="id_skills">{% trans 'Share your skills' %}<span class="required">*</span></label>
                                                        {% endif %}
                                                        {{ form_objective.skills }}
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row mt20 button-row">
                                                <div class="col-md-12">
                                                    <button class="btn btn-info btn-sm btn-block"><i class="fa fa-check-circle fa-lg"></i> {% trans 'Save and Update' %}</button>
                                                    <a class="btn btn-default btn-sm btn-block" href="#objective-section" data-toggle="collapse" data-target=".objective-skills" style="margin-right: 10px;"><i class="fa fa-chevron-circle-left fa-lg"></i> {% trans 'Cancel' %}</a>
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </section>
                        <section class="container-fluid pt20 {%if not candidate.user == request.user and not expertises %}hidden{%endif%}" id="experience-section">
                            <div class="row">
                                <div class="col-xs-12">
                                    <div class="row border-bottom border-white">
                                        <h3 class="text-light mt10 text-center">{% trans 'Experience' %}
                                                    
                                        </h3>
                                        {% if not company %}
                                            <h6 class="text-center"><span class=""><a class="form-add add_experience_form clickable"><i class="fa fa-plus"></i> Add New</a></span></h6>
                                        {% endif %}
                                    </div>
                                    <div class="row no-card collapse fade {% if not expertises %}in{% endif %}">
                                        <div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20 text-light">No Experience</div>
                                    </div>
                                    <div class="row experience-form-0 collapse fade" id="experience_form">
                                        <form id="experience-form-0" enctype="multiart/form-data" action="." method="post" role="form" class="">
                                            {%csrf_token%}
                                            <div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20">
                                                <div class="row">
                                                    <div class="col-md-6 col-xs-12">
                                                        <div class="form-group">
                                                            <label for="id_company">Company<span class="required">*</span></label>
                                                            <div class="input-group input-group-sm">
                                                                <div class="input-group-addon"><i class="fa fa-lg fa-building"></i></div>
                                                                {{form_experience.company }}
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 col-xs-12">
                                                        <div class="form-group">
                                                            <label for="id_industry">Industry<span class="required">*</span></label>
                                                            <div class="input-group input-group-sm">
                                                                <div class="input-group-addon"><i class="fa fa-lg fa-gears"></i></div>
                                                                {{form_experience.industry }}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6 col-xs-12">
                                                        <div class="form-group">
                                                            <label for="id_employment">Position Held<span class="required">*</span></label>
                                                            <div class="input-group input-group-sm">
                                                                <div class="input-group-addon"><i class="fa fa-lg fa-briefcase"></i></div>
                                                                {{form_experience.employment }}
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 col-xs-12">
                                                        <div class="form-group">
                                                            <label for="id_country">Country<span class="required">*</span></label>
                                                            <div class="input-group input-group-sm">
                                                                <div class="input-group-addon"><i class="fa fa-lg fa-globe"></i></div>
                                                                {{form_experience.country }}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6 col-xs-12">
                                                        <div class="form-group">
                                                            <label for="id_state">State</label>
                                                            <div class="input-group input-group-sm">
                                                                <div class="input-group-addon"><i class="fa fa-lg fa-paper-plane"></i></div>
                                                                {{form_experience.state }}
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 col-xs-12">
                                                        <div class="form-group">
                                                            <label for="id_city"></label>
                                                            <div class="input-group input-group-sm">
                                                                <div class="input-group-addon"><i class="fa fa-lg fa-map-marker"></i></div>
                                                                {{ form_experience.city }}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6 col-xs-12">
                                                        <dl class="dl-horizontal">
                                                            <dt style="text-align: left">
                                                                <label for="id_travel">{% trans 'Current Job?' %}</label>
                                                            </dt>
                                                            <dd style="margin-left: -10px">
                                                                <label id="sliderLabel">
                                                                    {{ form_experience.present }} Yes
                                                                </label>
                                                            </dd>
                                                        </dl>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6 col-xs-12">
                                                        <div class="form-group">
                                                            <label for="id_startdate">Start Date<span class="required">*</span></label>
                                                            <div class="input-group input-group-sm">
                                                                <div class="input-group-addon"><i class="fa fa-lg fa-calendar"></i></div>
                                                                {{ form_experience.start_date}}
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 col-xs-12">
                                                        <div class="form-group">
                                                            <label for="id_enddate">End Date</label>
                                                            <div class="input-group input-group-sm">
                                                                <div class="input-group-addon"><i class="fa fa-lg fa-calendar"></i></div>
                                                                {{ form_experience.end_date }}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-xs-12">
                                                        <div class="form-group">
                                                            <label for="id_tasks">Description<span class="required">*</span></label>
                                                            <div>{{form_experience.tasks}}</div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row mt20 button-row">
                                                    <div class="col-md-12">
                                                        <button type="submit" class="btn btn-info btn-sm btn-block no-br">
                                                            <i class="fa fa-check-circle fa-lg"> </i>
                                                            Save and Update
                                                        </button>
                                                        <a class="btn btn-default btn-sm btn-block form-destruct"  href="#experience-section" style="margin-right: 10px;"><i class="fa fa-chevron-circle-left fa-lg"></i> {% trans 'Cancel' %}</a>
                                                        
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                    {% for expertise in expertises %}
                                        <div class="row experience-form-{{expertise.id}} collapse fade in">
                                            <div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20">
                                                <h4 class="pl15 pr15">
                                                    <i class="fa fa-briefcase"></i> <span class="experience_employment">{{ expertise.employment }}</span>
                                                    {% if not company %}
                                                         |
                                                        <small>
                                                            <a data-toggle="collapse" data-target=".experience-form-{{expertise.id}}" class="clickable">{% trans 'Update' %}</a>
                                                             -
                                                            <a class="clickable remove-card" data-card=".experience-form-{{expertise.id}}" data-card-type="experience"> Remove</a>
                                                        </small>
                                                    {% endif %}
                                                    <small class="pull-right"><i class="fa fa-clock-o"></i> <span class="experience_duration">{% if expertise.present %}
                                                            {{ today|timeuntil:expertise.start_date }}
                                                        {% else %}
                                                            {{ expertise.end_date|timeuntil:expertise.start_date }}
                                                        {% endif %}</span></small>
                                                </h4>
                                                <div class="container-fluid">
                                                    <div class="row">
                                                        <div class="col-md-6">
                                                            <h4 class=""><i class="fa fa-building"></i> <span class="experience_company">{{ expertise.company }}</span></h4>
                                                            <span><i class="fa fa-map-marker"></i> <span class="experience_location">{% if expertise.city %}{{expertise.city}}, {% endif%}{%if expertise.state %}{{expertise.state}}, {%endif%}{{expertise.country}}</span></span>
                                                        </div>
                                                        <div class="col-md-6 text-right pt10">
                                                            <small class=""><i class="fa fa-calendar"></i> <span class="experience_date">{{expertise.start_date }}{% if expertise.present %}
                                                                - {% trans 'Current Job' %}
                                                            {% else %}
                                                                 - {{ expertise.end_date}}
                                                            {% endif %}</span></small>
                                                        </div>
                                                    </div>
                                                    <p class="mt10"><span class="experience_tasks">{{ expertise.tasks }}</span></p>   
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row experience-form-{{expertise.id}} collapse fade">
                                            <form id="experience-form-{{expertise.id}}" enctype="multiart/form-data" action="." method="post" role="form" class=" " data-id="{{expertise.id}}">
                                                {%csrf_token%}
                                                <div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20">
                                                    <div class="row">
                                                        <div class="col-md-6 col-xs-12">
                                                            <div class="form-group">
                                                                <label for="id_company">Company<span class="required">*</span></label>
                                                                <div class="input-group input-group-sm">
                                                                    <div class="input-group-addon"><i class="fa fa-lg fa-building"></i></div>
                                                                    {{expertise.form.company }}
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6 col-xs-12">
                                                            <div class="form-group">
                                                                <label for="id_industry">Industry<span class="required">*</span></label>
                                                                <div class="input-group input-group-sm">
                                                                    <div class="input-group-addon"><i class="fa fa-lg fa-gears"></i></div>
                                                                    {{expertise.form.industry }}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-6 col-xs-12">
                                                            <div class="form-group">
                                                                <label for="id_employment">Position Held<span class="required">*</span></label>
                                                                <div class="input-group input-group-sm">
                                                                    <div class="input-group-addon"><i class="fa fa-lg fa-briefcase"></i></div>
                                                                    {{expertise.form.employment }}
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6 col-xs-12">
                                                            <div class="form-group">
                                                                <label for="id_country">Country<span class="required">*</span></label>
                                                                <div class="input-group input-group-sm">
                                                                    <div class="input-group-addon"><i class="fa fa-lg fa-globe"></i></div>
                                                                    {{expertise.form.country }}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-6 col-xs-12">
                                                            <div class="form-group">
                                                                <label for="id_state">State</label>
                                                                <div class="input-group input-group-sm">
                                                                    <div class="input-group-addon"><i class="fa fa-lg fa-paper-plane"></i></div>
                                                                    {{expertise.form.state }}
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6 col-xs-12">
                                                            <div class="form-group">
                                                                <label for="id_city">City</label>
                                                                <div class="input-group input-group-sm">
                                                                    <div class="input-group-addon"><i class="fa fa-lg fa-map-marker"></i></div>
                                                                    {{ expertise.form.city }}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-6 col-xs-12">
                                                            <dl class="dl-horizontal">
                                                                <dt style="text-align: left">
                                                                    <label for="id_present">{% trans 'Current Job?' %}</label>
                                                                </dt>
                                                                <dd style="margin-left: -10px">
                                                                    <label id="sliderLabel">
                                                                        {{ expertise.form.present }} Yes
                                                                    </label>
                                                                </dd>
                                                            </dl>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-6 col-xs-12">
                                                            <div class="form-group">
                                                                <label for="id_startdate">Start Date<span class="required">*</span></label>
                                                                <div class="input-group input-group-sm">
                                                                    <div class="input-group-addon"><i class="fa fa-lg fa-calendar"></i></div>
                                                                    {{ expertise.form.start_date}}
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6 col-xs-12">
                                                            <div class="form-group">
                                                                <label for="id_enddate">End Date</label>
                                                                <div class="input-group input-group-sm">
                                                                    <div class="input-group-addon"><i class="fa fa-lg fa-calendar"></i></div>
                                                                    {{ expertise.form.end_date }}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-xs-12">
                                                            <div class="form-group">
                                                                <label for="id_tasks">Description<span class="required">*</span></label>
                                                                <div>{{expertise.form.tasks}}</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row mt20 button-row">
                                                        <div class="col-md-12">
                                                            <button type="submit" class="btn btn-info btn-sm btn-block no-br">
                                                                <i class="fa fa-check-circle fa-lg"> </i>
                                                                Save and Update
                                                            </button>
                                                            <a class="btn btn-default btn-sm btn-block" data-toggle="collapse" data-target=".experience-form-{{expertise.id}}"  style="margin-right: 10px;" href="#experience-section"><i class="fa fa-chevron-circle-left fa-lg"></i> {% trans 'Cancel' %}</a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    {% endfor %}
                                </div>
                            </div>
                        </section>
                        <section class="container-fluid pt20 {%if not candidate.user == request.user and not academics %}hidden{%endif%}" id="academic-section">
                            <div class="row">
                                <div class="col-xs-12">
                                    <div class="row border-bottom border-white">
                                        <h3 class="text-light mt10 text-center">{% trans 'Education' %}</h3>
                                        {% if not company %}
                                            <h6 class="text-center"><span>
                                                <!--a href=""><i class="fa fa-plus"></i> Add New</a-->
                                                <a class="form-add clickable add_academic_form"><i class="fa fa-plus"></i> Add New</a>
                                            </span></h6>
                                        {% endif %}
                                    </div>  
                                    <div class="row no-card collapse fade {% if not academics %}in{% endif %}">
                                        <div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20 text-light">No Education</div>
                                    </div>                          
                                    <div class="row academic-form-0 collapse fade" id="academic_form">
                                        <form id="academic-form-0" enctype="multipart/form-data" action="." method="post" role="form" class="" >
                                            {% csrf_token %}
                                            <!-- Personal data -->
                                            <div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20">
                                                <div class="row">
                                                    <!-- Institution -->
                                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                                        <div class="form-group">
                                                            <label for="id_school">{% trans 'Institution' %}<span class="required">*</span></label>
                                                            <div class="input-group input-group-sm">
                                                                <div class="input-group-addon"><i class="fa fa-institution fa-lg"></i></div>
                                                                {{ form_academic.school }}
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- Level of Study -->
                                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                                        <div class="form-group">
                                                            <label for="id_degree">{% trans 'Level of study' %}<span class="required">*</span></label>
                                                            <div class="input-group input-group-sm {% if form_academic.degree.errors %}has-error{% endif %}">
                                                                <div class="input-group-addon"><i class="fa fa-mortar-board fa-lg"></i></div>
                                                                {{ form_academic.degree }}
                                                            </div>
                                                        </div>
                                                    </div>

                                                    
                                                </div><!-- Name of Institution and Level of Study-->
                                            
                                                <div class="row">
                                                    <!-- Location -->
                                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                                        <div class="form-group">
                                                            <label for="id_course_name">{% trans 'Course Name' %}<span class="required">*</span></label>
                                                            <div class="input-group input-group-sm {% if form_academic.country.errors %}has-error{% endif %}">
                                                                <div class="input-group-addon"><i class="fa fa-globe fa-lg"></i></div>
                                                                {{ form_academic.course_name }}
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- Status -->
                                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                                        <div class="form-group">
                                                            <label for="id_status">{% trans 'Status' %}<span class="required">*</span></label>
                                                            <div class="input-group input-group-sm {% if form_academic.status.errors %}has-error{% endif %}">
                                                                <div class="input-group-addon"><i class="fa fa-check-square-o fa-lg"></i></div>
                                                                {{ form_academic.status }}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div><!-- Level and Status -->

                                                <div id="area-career-row" class="row">
                                                    <!-- Area -->
                                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                                        <div class="form-group">
                                                            <label for="id_area">{% trans 'Area of Study' %}<span class="required">*</span></label>
                                                            <div class="input-group input-group-sm {% if form_academic.area.errors %}has-error{% endif %}">
                                                                <div class="input-group-addon"><i class="fa fa-cubes fa-lg"></i></div>
                                                                {{ form_academic.area }}
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- Country -->
                                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                                            <div class="form-group">
                                                                <label for="id_country">{% trans 'Country' %}<span class="required">*</span></label>
                                                                <div class="input-group input-group-sm {% if form_academic.country.errors %}has-error{% endif %}">
                                                                    <div class="input-group-addon"><i class="fa fa-globe fa-lg"></i></div>
                                                                    {{ form_academic.country }}
                                                                </div>
                                                            </div>
                                                        </div>
                                                </div><!-- Level and Status -->

                                                <div id="other-career" class="row hidden">
                                                    <!-- name of the career - If not mentioned above -->
                                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                                        <div class="form-group">
                                                            {% if form_academic.other.errors %}
                                                                <ul class="list-unstyled error-list">
                                                                {% for error in form_academic.other.errors %}
                                                                    <li>{{ error|escape }}</li>
                                                                {% endfor %}
                                                                </ul>
                                                            {% else %}
                                                                <label for="id_other">{% trans 'Name of the career' %}<span class="required">*</span></label>
                                                            {% endif %}
                                                            <div class="input-group input-group-sm {% if form_academic.other.errors %}has-error{% endif %}">
                                                                <div class="input-group-addon"><i class="fa fa-tag fa-lg"></i></div>
                                                                {{ form_academic.other }}<input class="form-control" type="text">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div><!-- Name of the career -->

                                                <div class="row">
                                                        <!-- State and City -->
                                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                                            <div class="form-group">
                                                                {% if form_academic.state.errors %}
                                                                    <ul class="list-unstyled error-list">
                                                                    {% for error in form_academic.state.errors %}
                                                                        <li>{{ error|escape }}</li>
                                                                    {% endfor %}
                                                                    </ul>
                                                                {% else %}
                                                                    <label for="id_state">{% trans 'Name of the State' %}</label>
                                                                {% endif %}
                                                                <div class="input-group input-group-sm {% if form_academic.state.errors %}has-error{% endif %}">
                                                                    <div class="input-group-addon"><i class="fa fa-tag fa-lg"></i></div>
                                                                    {{ form_academic.state }}
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!--City-->
                                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                                            <div class="form-group">
                                                                {% if form_academic.city.errors %}
                                                                    <ul class="list-unstyled error-list">
                                                                    {% for error in form_academic.city.errors %}
                                                                        <li>{{ error|escape }}</li>
                                                                    {% endfor %}
                                                                    </ul>
                                                                {% else %}
                                                                    <label for="id_city">{% trans 'Name of the City' %}</label>
                                                                {% endif %}
                                                                <div class="input-group input-group-sm {% if form_academic.city.errors %}has-error{% endif %}">
                                                                    <div class="input-group-addon"><i class="fa fa-tag fa-lg"></i></div>
                                                                    {{ form_academic.city }}
                                                                </div>
                                                            </div>
                                                        </div>
                                                </div><!-- Name of the career -->

                                                <div class="row">
                                                    <!-- Start Date-->
                                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                                        <div class="form-group">
                                                            {% if form_academic.start_date.errors %}
                                                                <ul class="list-unstyled error-list">
                                                                {% for error in form_academic.start_date.errors %}
                                                                    <li>{{ error|escape }}</li>
                                                                {% endfor %}
                                                                </ul>
                                                            {% else %}
                                                                <label for="id_start_date">{% trans 'Start Date' %}<span class="required">*</span></label>
                                                            {% endif %}
                                                            <div class="input-group input-group-sm {% if form_academic.start_date.errors %}has-error{% endif %}">
                                                                <div class="input-group-addon"><i class="fa fa-calendar fa-lg"></i></div>
                                                                {{ form_academic.start_date }}
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <!-- Passing date -->
                                                    <div id="end-date" class="col-md-6 col-sm-6 col-xs-6">
                                                        <div class="form-group">
                                                            {% if form_academic.end_date.errors %}
                                                                <ul class="list-unstyled error-list">
                                                                {% for error in form_academic.end_date.errors %}
                                                                    <li>{{ error|escape }}</li>
                                                                {% endfor %}
                                                                </ul>
                                                            {% else %}
                                                                <label for="id_end_date">{% trans 'End Date' %}<span class="required">*</span></label>
                                                            {% endif %}
                                                            <div class="input-group input-group-sm {% if form_academic.end_date.errors %}has-error{% endif %}">
                                                                <div class="input-group-addon"><i class="fa fa-calendar fa-lg"></i></div>
                                                                {{ form_academic.end_date }}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div><!-- Date of Joining and Passing -->

                                                    {#                {{ form_academic.as_p }}#}

                                                <div class="row mt20 button-row">
                                                    <div class="col-md-12">
                                                        <button type="submit" class="btn btn-info btn-sm btn-block no-br">
                                                            <i class="fa fa-check-circle fa-lg"> </i>
                                                            Save and Update
                                                        </button>
                                                        <a class="btn btn-default btn-sm btn-block form-destruct"  href="#academic-section" style="margin-right: 10px;"><i class="fa fa-chevron-circle-left fa-lg"></i> {% trans 'Cancel' %}</a>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                    {% for academic in academics %}
                                        <div class="row academic-form-{{academic.id}} collapse fade in">
                                            <div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20">
                                                <h4 class="pl15 pr15">
                                                    <i class="fa fa-certificate"></i> <span class="academic_coursename">{{academic.course_name|default:'Not Provided'}}, {{academic.area}}</span>
                                                    {% if not company %}
                                                         |
                                                        <small>
                                                            <a data-toggle="collapse" data-target=".academic-form-{{academic.id}}" class="clickable">{% trans 'Update' %}</a>
                                                             -
                                                            <a class="clickable remove-card" data-card=".academic-form-{{academic.id}}" data-card-type="academic"> Remove</a>
                                                        </small>
                                                    {% endif %}
                                                    <small class="pull-right"><i class="fa fa-flag-checkered"></i> <span class="academic_status">{{ academic.status }}</span></small>
                                                </h4>
                                                <h5 class='pl15 pr15 no-margin-bottom'><i class="fa fa-mortar-board"></i> <span class="academic_degree">{{academic.degree}}</span></h5>
                                                <div class="container-fluid">
                                                    <div class="row">
                                                        <div class="col-md-6">
                                                            <h5 class=""><i class="fa fa-university"></i> <span class="academic_school">{{ academic.school }}</span></h5>
                                                            <span><i class="fa fa-map-marker"></i> <span class="academic_location">{%if academic.city%}{{academic.city}}, {%endif%}{%if academic.state%}{{academic.state}}, {%endif%}{{academic.country}}</span></span>
                                                        </div>
                                                        <div class="col-md-6 text-right pt10">
                                                            <small class=""><i class="fa fa-calendar"></i> <span class="academic_date">{{academic.start_date }}{% if academic.status.codename == 'progress' %}
                                                                            - {% trans 'Ongoing' %}
                                                                        {% else %}
                                                                             - {{ academic.end_date}}
                                                                        {% endif %}</span></small>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row form-row academic-form-{{academic.id}} collapse fade">
                                            <form id="academic-form-{{academic.id}}" enctype="multipart/form-data" action="." method="post" role="form" class="" data-id="{{academic.id}}">
                                                {% csrf_token %}
                                                <!-- Personal data -->
                                                <div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20">
                                                    <div class="row">
                                                        <!-- Institucion -->
                                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                                            <div class="form-group">
                                                                    <ul class="list-unstyled error-list">
                                                                    {% for error in academic.form.school.errors %}
                                                                        <li>{{ error|escape }}</li>
                                                                    {% endfor %}
                                                                    </ul>
                                                                    <label for="id_school">{% trans 'Institution' %}<span class="required">*</span></label>
                                                                <div class="input-group input-group-sm {% if academic.form.school.errors %}has-error{% endif %}">
                                                                    <div class="input-group-addon"><i class="fa fa-institution fa-lg"></i></div>
                                                                    {{ academic.form.school }}
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!-- Level of Study -->
                                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                                            <div class="form-group">
                                                                {% if academic.form.degree.errors %}
                                                                    <ul class="list-unstyled error-list">
                                                                    {% for error in academic.form.degree.errors %}
                                                                        <li>{{ error|escape }}</li>
                                                                    {% endfor %}
                                                                    </ul>
                                                                {% else %}
                                                                    <label for="id_degree">{% trans 'Level of study' %}<span class="required">*</span></label>
                                                                {% endif %}
                                                                <div class="input-group input-group-sm {% if academic.form.degree.errors %}has-error{% endif %}">
                                                                    <div class="input-group-addon"><i class="fa fa-mortar-board fa-lg"></i></div>
                                                                    {{ academic.form.degree }}
                                                                </div>
                                                            </div>
                                                        </div>                                
                                                    </div><!-- Name of Institution and Level of Study-->
                                                    <div class="row">
                                                        <!--Course Name-->
                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                {% if academic.form.course_name.errors %}
                                                                    <ul class="list-unstyled error-list">
                                                                        {%for error in academic.form.course_name.errors %}
                                                                            <li>{{error|escape}}</li>
                                                                        {%endfor%}
                                                                    </ul>
                                                                {%else%}
                                                                    <label for="id_course_name">Course Name<span class="required">*</span></label>
                                                                {%endif%}
                                                                <div class="input-group input-group-sm {%if academic.form.course_name.error%}has-error{%endif%}">
                                                                    <div class="input-group-addon"><i class="fa fa-mortar-board fa-lg"></i></div>
                                                                    {{academic.form.course_name}}
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!-- Status -->
                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <label for="id_status">{% trans 'Status' %}<span class="required">*</span></label>
                                                                <div class="input-group input-group-sm {% if academic.form.status.errors %}has-error{% endif %}">
                                                                    <div class="input-group-addon"><i class="fa fa-check-square-o fa-lg"></i></div>
                                                                    {{ academic.form.status }}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div><!-- Course Name and Status -->
                                                    <div id="area-country-row" class="row">
                                                        <!-- Area -->
                                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                                            <div class="form-group">
                                                                {% if academic.form.area.errors %}
                                                                    <ul class="list-unstyled error-list">
                                                                    {% for error in academic.form.area.errors %}
                                                                        <li>{{ error|escape }}</li>
                                                                    {% endfor %}
                                                                    </ul>
                                                                {% else %}
                                                                    <label for="id_area">{% trans 'Area of Study' %}<span class="required">*</span></label>
                                                                {% endif %}
                                                                <div class="input-group input-group-sm {% if academic.form.area.errors %}has-error{% endif %}">
                                                                    <div class="input-group-addon"><i class="fa fa-cubes fa-lg"></i></div>
                                                                    {{ academic.form.area }}
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <!-- Country -->
                                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                                            <div class="form-group">
                                                                {% if academic.form.country.errors %}
                                                                    <ul class="list-unstyled error-list">
                                                                    {% for error in academic.form.country.errors %}
                                                                        <li>{{ error|escape }}</li>
                                                                    {% endfor %}
                                                                    </ul>
                                                                {% else %}
                                                                    <label for="id_country">{% trans 'Country' %}<span class="required">*</span></label>
                                                                {% endif %}
                                                                <div class="input-group input-group-sm {% if academic.form.country.errors %}has-error{% endif %}">
                                                                    <div class="input-group-addon"><i class="fa fa-globe fa-lg"></i></div>
                                                                    {{ academic.form.country }}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div><!-- Area and Country -->
                                                    <div class="row">
                                                        <!-- State and City -->
                                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                                            <div class="form-group">
                                                                {% if academic.form.state.errors %}
                                                                    <ul class="list-unstyled error-list">
                                                                    {% for error in academic.form.state.errors %}
                                                                        <li>{{ error|escape }}</li>
                                                                    {% endfor %}
                                                                    </ul>
                                                                {% else %}
                                                                    <label for="id_state">{% trans 'Name of the State' %}</label>
                                                                {% endif %}
                                                                <div class="input-group input-group-sm {% if academic.form.state.errors %}has-error{% endif %}">
                                                                    <div class="input-group-addon"><i class="fa fa-tag fa-lg"></i></div>
                                                                    {{ academic.form.state }}
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!--City-->
                                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                                            <div class="form-group">
                                                                {% if academic.form.city.errors %}
                                                                    <ul class="list-unstyled error-list">
                                                                    {% for error in academic.form.city.errors %}
                                                                        <li>{{ error|escape }}</li>
                                                                    {% endfor %}
                                                                    </ul>
                                                                {% else %}
                                                                    <label for="id_city">{% trans 'Name of the City' %}</label>
                                                                {% endif %}
                                                                <div class="input-group input-group-sm {% if academic.form.city.errors %}has-error{% endif %}">
                                                                    <div class="input-group-addon"><i class="fa fa-tag fa-lg"></i></div>
                                                                    {{ academic.form.city }}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div><!-- Name of the career -->
                                                    <div class="row">
                                                        <!-- Start Date-->
                                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                                            <div class="form-group">
                                                                {% if academic.form.start_date.errors %}
                                                                    <ul class="list-unstyled error-list">
                                                                    {% for error in academic.form.start_date.errors %}
                                                                        <li>{{ error|escape }}</li>
                                                                    {% endfor %}
                                                                    </ul>
                                                                {% else %}
                                                                    <label for="id_start_date">{% trans 'Start Date' %}<span class="required">*</span></label>
                                                                {% endif %}
                                                                <div class="input-group input-group-sm {% if academic.form.start_date.errors %}has-error{% endif %}">
                                                                    <div class="input-group-addon"><i class="fa fa-calendar fa-lg"></i></div>
                                                                    {{ academic.form.start_date }}
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <!-- Passing date -->
                                                        <div id="end-date" class="col-md-6 col-sm-6 col-xs-6">
                                                            <div class="form-group">
                                                                {% if academic.form.end_date.errors %}
                                                                    <ul class="list-unstyled error-list">
                                                                    {% for error in academic.form.end_date.errors %}
                                                                        <li>{{ error|escape }}</li>
                                                                    {% endfor %}
                                                                    </ul>
                                                                {% else %}
                                                                    <label for="id_end_date">{% trans 'End Date' %}<span class="required">*</span></label>
                                                                {% endif %}
                                                                <div class="input-group input-group-sm {% if academic.form.end_date.errors %}has-error{% endif %}">
                                                                    <div class="input-group-addon"><i class="fa fa-calendar fa-lg"></i></div>
                                                                    {{ academic.form.end_date }}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div><!-- Date of Joining and Passing -->
                                                    <div class="row mt20 button-row">
                                                        <div class="col-md-12">
                                                            <button type="submit" class="btn btn-info btn-sm btn-block no-br">
                                                                <i class="fa fa-check-circle fa-lg"> </i>
                                                                Save and Update
                                                            </button>
                                                            <a href="#academic-section" class="btn btn-default btn-sm btn-block" data-toggle="collapse" data-target=".academic-form-{{academic.id}}"><i class="fa fa-chevron-circle-left fa-lg"></i> {% trans 'Cancel' %}</a>
                                                        </div>
                                                    </div>

                                                </div>
                                            </form>
                                        </div>
                                    {% endfor %}
                                </div>
                            </div>
                        </section>
                        <section class="container-fluid pt20 {%if not candidate.user == request.user and not trainings %}hidden{%endif%}" id="training-section">
                            <div class="row">
                                <div class="col-xs-12">
                                    <div class="row border-bottom border-white">
                                        <h3 class="text-light text-center mt10">
                                        Trainings
                                        </h3>
                                        {%if not company%}
                                            <h6 class="text-center">
                                                <span>
                                                    <a class="form-add clickable add_training_form" data-toggle="collapse" data-target="#training-form"><i class="fa fa-plus"></i> Add New</a>
                                                </span>
                                            </h6>
                                        {%endif%}
                                    </div>
                                    <div class="row no-card collapse fade {% if not trainings %}in{% endif %}">
                                        <div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20 text-light">No Training</div>
                                    </div>
                                    <div class="row training-form-0 collapse fade" id="training_form">
                                        <form id="training-form-0" enctype="multipart/form-data" action="." method="post" role="form" class="">
                                            {% csrf_token %}
                                            <!-- Training Data -->
                                            <div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20">
                                                <div class="row">
                                                    <!-- Name -->
                                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                                        <div class="form-group">
                                                            {% if form_training.name.errors %}
                                                                <ul class="list-unstyled error-list">
                                                                {% for error in form_training.name.errors %}
                                                                    <li>{{ error|escape }}</li>
                                                                {% endfor %}
                                                                </ul>
                                                            {% else %}
                                                                <label for="id_training">{% trans 'Training Name' %}<span class="required">*</span></label>
                                                            {% endif %}
                                                            <div class="input-group input-group-sm {% if form_training.name.errors %}has-error{% endif %}">
                                                                <div class="input-group-addon"><i class="fa fa-certificate fa-lg"></i></div>
                                                                {{ form_training.name }}
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- Description -->
                                                    <div class="col-md-12">
                                                        <div class="form-group">
                                                            {% if form_training.description.errors %}
                                                                <ul class="list-unstyled error-list">
                                                                {% for error in form_training.description.errors %}
                                                                    <li>{{ error|escape }}</li>
                                                                {% endfor %}
                                                                </ul>
                                                            {% else %}
                                                                <label for="id_description">{% trans 'Description' %}<span class="required">*</span></label>
                                                            {% endif %}                                        
                                                                {{ form_training.description }}
                                                        </div>
                                                    </div>           
                                                </div><!-- Training Name and Description-->
                                                <div class="row mt20 button-row">
                                                    <div class="col-md-12">
                                                        <button type="submit" class="btn btn-info btn-sm btn-block no-br">
                                                            <i class="fa fa-check-circle fa-lg"> </i>
                                                            Save and Update
                                                        </button>
                                                    <a class="btn btn-default btn-sm btn-block form-destruct"  href="#training-section" style="margin-right: 10px;"><i class="fa fa-chevron-circle-left fa-lg"></i> {% trans 'Cancel' %}</a>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>                               
                                    </div>
                                    {% for training in trainings %}
                                        <div class="row training-form-{{training.id}} collapse fade in">
                                            <div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20">
                                                <h4 class="pl15 pr15">
                                                    <i class="fa fa-certificate"></i> <span class="training_name">{{training.name}}</span>
                                                    {% if not company %}
                                                        |
                                                        <small>
                                                            <a data-toggle="collapse" data-target=".training-form-{{training.id}}" class="clickable">{% trans 'Update' %}</a>
                                                             -
                                                            <a class="clickable remove-card" data-card=".training-form-{{training.id}}" data-card-type="training"> Remove</a>
                                                        </small>
                                                    {% endif %}
                                                </h4>
                                                <div class="container-fluid">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <p class="training_description">{{training.description}}</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                        </div>
                                        <div class="row form-row training-form-{{training.id}} collapse fade">
                                            <form id="training-form-{{training.id}}" enctype="multipart/form-data" action="." method="post" role="form" class="" data-id="{{training.id}}">
                                                {% csrf_token %}
                                                <!-- Training Data -->
                                                <div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20">
                                                    <div class="row">
                                                        <!-- Name -->
                                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                                            <div class="form-group">
                                                                {% if training.form.name.errors %}
                                                                    <ul class="list-unstyled error-list">
                                                                    {% for error in training.form.name.errors %}
                                                                        <li>{{ error|escape }}</li>
                                                                    {% endfor %}
                                                                    </ul>
                                                                {% else %}
                                                                    <label for="id_training">{% trans 'Training Name' %}<span class="required">*</span></label>
                                                                {% endif %}
                                                                <div class="input-group input-group-sm {% if training.form.name.errors %}has-error{% endif %}">
                                                                    <div class="input-group-addon"><i class="fa fa-certificate fa-lg"></i></div>
                                                                    {{ training.form.name }}
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!-- Description -->
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                {% if training.form.description.errors %}
                                                                    <ul class="list-unstyled error-list">
                                                                    {% for error in training.form.description.errors %}
                                                                        <li>{{ error|escape }}</li>
                                                                    {% endfor %}
                                                                    </ul>
                                                                {% else %}
                                                                    <label for="id_description">{% trans 'Description' %}<span class="required">*</span></label>
                                                                {% endif %}                                        
                                                                    {{ training.form.description }}
                                                            </div>
                                                        </div>           
                                                    </div><!-- Training Name and Description-->
                                                    <div class="row mt20 button-row">
                                                        <div class="col-md-12">
                                                            <button type="submit" class="btn btn-info btn-sm btn-block no-br">
                                                                <i class="fa fa-check-circle fa-lg"> </i>
                                                                Save and Update
                                                            </button>
                                                        <a class="btn btn-default btn-sm btn-block" data-toggle="collapse" data-target=".training-form-{{training.id}}"  style="margin-right: 10px;" href="#training-section"><i class="fa fa-chevron-circle-left fa-lg"></i> {% trans 'Cancel' %}</a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </form>
                                            
                                        </div>
                                    {% endfor %}
                                </div>
                            </div> 
                        </section>
                        <section class="container-fluid pt20 {%if not candidate.user == request.user and not certificates %}hidden{%endif%}" id="certificate-section">
                            <div class="row">
                                <div class="col-xs-12">
                                    <div class="row border-bottom border-white">
                                        <h3 class="text-light text-center">
                                        Certifications
                                        </h3>
                                        {%if not company%}
                                            <h6 class="text-center">
                                                <span>
                                                    <a class="form-add clickable add_certificate_form" data-toggle="collapse" data-target="#certificate-form"><i class="fa fa-plus"></i> Add New</a>
                                                </span>
                                            </h6>
                                        {%endif%}
                                    </div>
                                    <div class="row no-card collapse fade {% if not certificates %}in{% endif %}">
                                        <div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20 text-light">No Certificate</div>
                                    </div>
                                    <div class="row certificate-form-0 collapse fade" id="certificate_form">
                                        <form id="certificate-form-0" enctype="multipart/form-data" action="." method="post" role="form" class="">
                                            {% csrf_token %}
                                            <!-- certificate Data -->
                                            <div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20">
                                                <div class="row">
                                                    <!-- Name -->
                                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                                        <div class="form-group">
                                                            {% if form_certificate.name.errors %}
                                                                <ul class="list-unstyled error-list">
                                                                {% for error in form_certificate.name.errors %}
                                                                    <li>{{ error|escape }}</li>
                                                                {% endfor %}
                                                                </ul>
                                                            {% else %}
                                                                <label for="id_certificate">{% trans 'Certificate Name' %}<span class="required">*</span></label>
                                                            {% endif %}
                                                            <div class="input-group input-group-sm {% if form_certificate.name.errors %}has-error{% endif %}">
                                                                <div class="input-group-addon"><i class="fa fa-certificate fa-lg"></i></div>
                                                                {{ form_certificate.name }}
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- Description -->
                                                    <div class="col-md-12">
                                                        <div class="form-group">
                                                            {% if form_certificate.description.errors %}
                                                                <ul class="list-unstyled error-list">
                                                                {% for error in form_certificate.description.errors %}
                                                                    <li>{{ error|escape }}</li>
                                                                {% endfor %}
                                                                </ul>
                                                            {% else %}
                                                                <label for="id_description">{% trans 'Description' %}<span class="required">*</span></label>
                                                            {% endif %}                                        
                                                                {{ form_certificate.description }}
                                                        </div>
                                                    </div>           
                                                </div><!-- certificate Name and Description-->
                                                <div class="row mt20 button-row">
                                                    <div class="col-md-12">
                                                        <button type="submit" class="btn btn-info btn-sm btn-block no-br">
                                                            <i class="fa fa-check-circle fa-lg"> </i>
                                                            Save and Update
                                                        </button>
                                                    <a class="btn btn-default btn-sm btn-block form-destruct"  href="#certificate-section" style="margin-right: 10px;"><i class="fa fa-chevron-circle-left fa-lg"></i> {% trans 'Cancel' %}</a>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                    {% for certificate in certificates %}
                                        <div class="row certificate-form-{{certificate.id}} collapse fade in">
                                            <div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20">
                                                <h4 class="pl15 pr15">
                                                    <i class="fa fa-certificate"></i> <span class="certificate_name">{{certificate.name}}</span>
                                                    {% if not company %}
                                                        |
                                                        <small>
                                                            <a data-toggle="collapse" data-target=".certificate-form-{{certificate.id}}" class="clickable">{% trans 'Update' %}</a>
                                                             -
                                                            <a class="clickable remove-card" data-card=".certificate-form-{{certificate.id}}" data-card-type="certificate"> Remove</a>
                                                        </small>
                                                    {% endif %}
                                                </h4>
                                                <div class="container-fluid">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <p class="certificate_description">{{certificate.description}}</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row form-row certificate-form-{{certificate.id}} collapse fade">
                                            <form id="certificate-form-{{certificate.id}}" enctype="multipart/form-data" action="." method="post" role="form" class="" data-id="{{certificate.id}}">
                                                {% csrf_token %}
                                                <!-- certificate Data -->
                                                <div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20">
                                                    <div class="row">
                                                        <!-- Name -->
                                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                                            <div class="form-group">
                                                                {% if certificate.form.name.errors %}
                                                                    <ul class="list-unstyled error-list">
                                                                    {% for error in certificate.form.name.errors %}
                                                                        <li>{{ error|escape }}</li>
                                                                    {% endfor %}
                                                                    </ul>
                                                                {% else %}
                                                                    <label for="id_certificate">{% trans 'Certificate Name' %}<span class="required">*</span></label>
                                                                {% endif %}
                                                                <div class="input-group input-group-sm {% if certificate.form.name.errors %}has-error{% endif %}">
                                                                    <div class="input-group-addon"><i class="fa fa-certificate fa-lg"></i></div>
                                                                    {{ certificate.form.name }}
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!-- Description -->
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                {% if certificate.form.description.errors %}
                                                                    <ul class="list-unstyled error-list">
                                                                    {% for error in certificate.form.description.errors %}
                                                                        <li>{{ error|escape }}</li>
                                                                    {% endfor %}
                                                                    </ul>
                                                                {% else %}
                                                                    <label for="id_description">{% trans 'Description' %}<span class="required">*</span></label>
                                                                {% endif %}                                        
                                                                    {{ certificate.form.description }}
                                                            </div>
                                                        </div>           
                                                    </div><!-- certificate Name and Description-->
                                                    <div class="row mt20 button-row">
                                                        <div class="col-md-12">
                                                            <button type="submit" class="btn btn-info btn-sm btn-block no-br">
                                                                <i class="fa fa-check-circle fa-lg"> </i>
                                                                Save and Update
                                                            </button>
                                                        <a class="btn btn-default btn-sm btn-block"  style="margin-right: 10px;" data-toggle="collapse" data-target=".certificate-form-{{certificate.id}}" href="#certificate-section"><i class="fa fa-chevron-circle-left fa-lg"></i> {% trans 'Cancel' %}</a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </form>
                                            
                                        </div>
                                    {% endfor %}
                                </div>
                            </div> 
                        </section>
                        <section class="container-fluid pt20 {%if not candidate.user == request.user and not projects %}hidden{%endif%}" id="project-section">
                            <div class="row">
                                <div class="col-xs-12">
                                    <div class="row border-bottom border-white">
                                        <h3 class="text-light text-center">
                                        Projects
                                        </h3>
                                        {%if not company%}
                                            <h6 class="text-center">
                                                <span>
                                                    <a class="form-add clickable add_project_form" data-toggle="collapse" data-target="#project-form"><i class="fa fa-plus"></i> Add New</a>
                                                </span>
                                            </h6>
                                        {%endif%}
                                    </div>
                                    <div class="row no-card collapse fade {% if not projects %}in{% endif %}">
                                        <div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20 text-light">No Project</div>
                                    </div>                            
                                    <div class="row project-form-0 collapse fade" id="project_form">
                                        <form id="project-form-0" enctype="multipart/form-data" action="." method="post" role="form" class="" data-id="{{project.id}}">
                                            {% csrf_token %}
                                            <!-- project Data -->
                                            <div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20">
                                                <div class="row">
                                                    <!-- Name -->
                                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                                        <div class="form-group">
                                                            {% if form_project.name.errors %}
                                                                <ul class="list-unstyled error-list">
                                                                {% for error in form_project.name.errors %}
                                                                    <li>{{ error|escape }}</li>
                                                                {% endfor %}
                                                                </ul>
                                                            {% else %}
                                                                <label for="id_project">{% trans 'Project Name' %}<span class="required">*</span></label>
                                                            {% endif %}
                                                            <div class="input-group input-group-sm {% if form_project.name.errors %}has-error{% endif %}">
                                                                <div class="input-group-addon"><i class="fa fa-certificate fa-lg"></i></div>
                                                                {{ form_project.name }}
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- Description -->
                                                    <div class="col-md-12">
                                                        <div class="form-group">
                                                            {% if form_project.description.errors %}
                                                                <ul class="list-unstyled error-list">
                                                                {% for error in form_project.description.errors %}
                                                                    <li>{{ error|escape }}</li>
                                                                {% endfor %}
                                                                </ul>
                                                            {% else %}
                                                                <label for="id_description">{% trans 'Description' %}<span class="required">*</span></label>
                                                            {% endif %}                                        
                                                                {{ form_project.description }}
                                                        </div>
                                                    </div>           
                                                </div><!-- project Name and Description-->
                                                <div class="row mt20 button-row">
                                                    <div class="col-md-12">
                                                        <button type="submit" class="btn btn-info btn-sm btn-block no-br">
                                                            <i class="fa fa-check-circle fa-lg"> </i>
                                                            Save and Update
                                                        </button>
                                                    <a class="btn btn-default btn-sm btn-block form-destruct" href="#project-section"  style="margin-right: 10px;"><i class="fa fa-chevron-circle-left fa-lg"></i> {% trans 'Cancel' %}</a>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                        
                                    </div>
                                    {% for project in projects %}
                                        <div class="row project-form-{{project.id}} collapse fade in">
                                            <div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20">
                                                <h4 class="pl15 pr15">
                                                    <i class="fa fa-certificate"></i> <span class="project_name">{{project.name}}</span>
                                                    {% if not company %}
                                                        |
                                                        <small>
                                                            <a data-toggle="collapse" data-target=".project-form-{{project.id}}" class="clickable">{% trans 'Update' %}</a>
                                                             -
                                                            <a class="clickable remove-card" data-card=".project-form-{{project.id}}" data-card-type="project"> Remove</a>
                                                        </small>
                                                    {% endif %}
                                                </h4>
                                                <div class="container-fluid">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <p class="project_description">{{project.description}}</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row form-row project-form-{{project.id}} collapse fade">
                                            <form id="project-form-{{project.id}}" enctype="multipart/form-data" action="." method="post" role="form" class="" data-id="{{project.id}}">
                                                {% csrf_token %}
                                                <!-- project Data -->
                                                <div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20">
                                                    <div class="row">
                                                        <!-- Name -->
                                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                                            <div class="form-group">
                                                                {% if project.form.name.errors %}
                                                                    <ul class="list-unstyled error-list">
                                                                    {% for error in project.form.name.errors %}
                                                                        <li>{{ error|escape }}</li>
                                                                    {% endfor %}
                                                                    </ul>
                                                                {% else %}
                                                                    <label for="id_project">{% trans 'Project Name' %}<span class="required">*</span></label>
                                                                {% endif %}
                                                                <div class="input-group input-group-sm {% if project.form.name.errors %}has-error{% endif %}">
                                                                    <div class="input-group-addon"><i class="fa fa-certificate fa-lg"></i></div>
                                                                    {{ project.form.name }}
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!-- Description -->
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                {% if project.form.description.errors %}
                                                                    <ul class="list-unstyled error-list">
                                                                    {% for error in project.form.description.errors %}
                                                                        <li>{{ error|escape }}</li>
                                                                    {% endfor %}
                                                                    </ul>
                                                                {% else %}
                                                                    <label for="id_description">{% trans 'Description' %}<span class="required">*</span></label>
                                                                {% endif %}                                        
                                                                    {{ project.form.description }}
                                                            </div>
                                                        </div>           
                                                    </div><!-- project Name and Description-->
                                                    <div class="row mt20 button-row">
                                                        <div class="col-md-12">
                                                            <button type="submit" class="btn btn-info btn-sm btn-block no-br">
                                                                <i class="fa fa-check-circle fa-lg"> </i>
                                                                Save and Update
                                                            </button>
                                                        <a class="btn btn-default btn-sm btn-block"  style="margin-right: 10px;" data-toggle="collapse" data-target=".project-form-{{project.id}}" href="#project-section"><i class="fa fa-chevron-circle-left fa-lg"></i> {% trans 'Cancel' %}</a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </form>
                                            
                                        </div>
                                    {% endfor %}
                                </div>
                            </div> 
                        </section>
                        <section class="container-fluid pt20 {%if not candidate.user == request.user and not languages %}hidden{%endif%}" id="language-section">
                            <div class="row">
                                <div class="col-xs-12">
                                    <div class="row border-bottom border-white">
                                        <h3 class="text-light text-center">
                                        Languages
                                        </h3>
                                        {%if not company%}
                                            <h6 class="text-center">
                                                <span>
                                                    <a class="form-add clickable add_language_form"><i class="fa fa-plus"></i> Add New</a>
                                                </span>
                                            </h6>
                                        {%endif%}
                                    </div>
                                    <div class="row no-card collapse fade {% if not languages %}in{% endif %}">
                                        <div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20 text-light">No Language</div>
                                    </div>
                                    <div class="row language-form-0 collapse fade" id="language_form">
                                        <form id="language-form-0" enctype="multipart/form-data" action="." method="post" role="form" class="">
                                            {% csrf_token %}
                                            <!-- Language Data -->
                                            <div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20">
                                                <div class="row">
                                                    <!-- Name -->
                                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                                        <div class="form-group">
                                                            <label for="id_language">{% trans 'Language Name' %}<span class="required">*</span></label>
                                                            <div class="input-group input-group-sm">
                                                                <div class="input-group-addon"><i class="fa fa-globe fa-lg"></i></div>
                                                                {{ form_language.language }}
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- Read -->
                                                    <div class="col-xs-4 col-md-2 pt20 pb20 text-center">
                                                        <div class="form_group pt10">
                                                            <label for="id_read">Can Read? {{form_language.read}}</label>
                                                        </div>
                                                    </div>
                                                    <!-- Write -->
                                                    <div class="col-xs-4 col-md-2 pt20 pb20 text-center">
                                                        <div class="form_group pt10">
                                                            <label for="id_write">Can Write? {{form_language.write}}</label>
                                                        </div>
                                                    </div>
                                                    <!-- Speak -->
                                                    <div class="col-xs-4 col-md-2 pt20 pb20 text-center">
                                                        <div class="form_group pt10">
                                                            <label for="id_speak">Can Speak? {{form_language.speak}}</label>
                                                        </div>
                                                    </div>
                                                </div><!-- Language Name and Description-->
                                                <div class="row mt20 button-row">
                                                    <div class="col-md-12">
                                                        <button type="submit" class="btn btn-info btn-sm btn-block no-br">
                                                            <i class="fa fa-check-circle fa-lg"> </i>
                                                            Save and Update
                                                        </button>
                                                        <a class="btn btn-default btn-sm btn-block form-destruct"  style="margin-right: 10px;"><i class="fa fa-chevron-circle-left fa-lg" href="#language-section"></i> {% trans 'Cancel' %}</a>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                        
                                    </div>
                                    {% for language in languages %}
                                        <div class="row language-form-{{language.id}} collapse fade in">
                                            <div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20">
                                                <h4 class="pl15 pr15">
                                                    <i class="fa fa-language"></i> <span class="langauge_name">{{language.language}}</span>
                                                    {% if not company %}
                                                         | <small>
                                                            <a data-toggle="collapse" data-target=".language-form-{{language.id}}" class="clickable">Update</a>
                                                             - 
                                                            <a class="clickable remove-card" data-card=".language-form-{{language.id}}" data-card-type="language"> Remove</a>
                                                        </small>
                                                    {% endif %}
                                                    <small class="pull-right"><i class="fa fa-flag-checkered"></i> <span class="language_level">{{language.level}}</span></small>
                                                    
                                                </h4>
                                            </div>
                                        </div>
                                        <div class="row form-row language-form-{{language.id}} collapse fade">
                                            <form id="language-form-{{language.id}}" enctype="multipart/form-data" action="." method="post" role="form" class="" data-id="{{language.id}}">
                                                {% csrf_token %}
                                                <!-- Language Data -->
                                                <div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20">
                                                    <div class="row">
                                                        <!-- Name -->
                                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                                            <div class="form-group">
                                                                <label for="id_language">{% trans 'Language Name' %}<span class="required">*</span></label>
                                                                <div class="input-group input-group-sm">
                                                                    <div class="input-group-addon"><i class="fa fa-language fa-lg"></i></div>
                                                                    {{ language.form.language }}
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!-- Read -->
                                                        <div class="col-xs-4 col-md-2 pt20 pb20 text-center">
                                                            <div class="form_group pt10">
                                                                <label for="id_read">Can Read? {{language.form.read}}</label>
                                                            </div>
                                                        </div>
                                                        <!-- Write -->
                                                        <div class="col-xs-4 col-md-2 pt20 pb20 text-center">
                                                            <div class="form_group pt10">
                                                                <label for="id_write">Can Write? {{language.form.write}}</label>
                                                            </div>
                                                        </div>
                                                        <!-- Speak -->
                                                        <div class="col-xs-4 col-md-2 pt20 pb20 text-center">
                                                            <div class="form_group pt10">
                                                                <label for="id_speak">Can Speak? {{language.form.speak}}</label>
                                                            </div>
                                                        </div>
                                                    </div><!-- Language Name and Description-->
                                                    <div class="row mt20 button-row">
                                                        <div class="col-md-12">
                                                            <button type="submit" class="btn btn-info btn-sm btn-block no-br">
                                                                <i class="fa fa-check-circle fa-lg"> </i>
                                                                Save and Update
                                                            </button>
                                                            <a class="btn btn-default btn-sm btn-block"  style="margin-right: 10px;" data-toggle="collapse" data-target=".language-form-{{language.id}}" href="#language-section"><i class="fa fa-chevron-circle-left fa-lg"></i> {% trans 'Cancel' %}</a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                        
                                    {% endfor %}
                                </div>
                            </div> 
                        </section>
                        <section class="container-fluid pt20 text-muted {% if not candidate.user == request.user and not candidate.interests %}hidden{% endif %}" id="interests-section">
                            <div class="row interests collapse fade in">
                                <div class="col-xs-12">
                                    <h3 class="text-light mt10 text-center">Interests</h3>
                                    {%if not company%}
                                        <h6 class="text-center"><span><a class="clickable" data-toggle="collapse" data-target=".interests"><i class="fa fa-pencil"></i> Update</a></span></h6>
                                    {% endif %}
                                    
                                    <div class="row">
                                        <div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20 text-muted" id="profile_interests">{{candidate.interests|safe|default:'No Interests'}}
                                        </div>                                
                                    </div>
                                </div>
                            </div>
                            <div class="row interests collapse fade">
                                <div class="col-xs-12 no-padding">
                                    <form id="interests-form" enctype="multipart/form-data" action="." method="post" role="form" class="mt10">
                                        {% csrf_token %}
                                        <div class="row">
                                            <div class="col-xs-12">
                                                <h3 class="text-light mt10 text-center"> Interests </h3>
                                                
                                            </div>
                                        </div>
                                        <div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20">
                                            <div class="row">
                                                <div class="col-xs-12">
                                                    <div class="form-group">
                                                        {% if form_interests.interests.errors %}
                                                            <ul class="list-unstyled error-list">
                                                                {% for error in form_interests.interests.errors %}
                                                                    <li>{{error|escape}}</li>
                                                                {% endfor %}
                                                            </ul>
                                                        {% else %}
                                                            <label for="id_interests">Share your Interests</label>
                                                        {% endif %}
                                                        <div class="{% if form_interests.interests.errors %}has-error{%endif%}">
                                                            {{form_interests.interests}}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row mt20 button-row">
                                                <div class="col-md-12">
                                                    <button class="btn btn-info btn-sm btn-block"><i class="fa fa-check-circle fa-lg"></i> Save and Update</button>
                                                    <a class="btn btn-default btn-sm btn-block" href="#interests-section" data-toggle="collapse" data-target=".interests" style="margin-right:10px;"><i class="fa fa-chevron-circle-left fa-lg"></i> Cancel</a>
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </section>
                        <section class="container-fluid pt20 text-muted {% if not candidate.user == request.user and not candidate.hobbies %}hidden{% endif %}" id="hobbies-section">
                            <div class="row hobbies collapse fade in">
                                <div class="col-xs-12">
                                    <h3 class="text-light text-center mt10">Hobbies</h3>
                                    {%if not company%}
                                        <h6 class="text-center"><span><a class="clickable" data-toggle="collapse" data-target=".hobbies"><i class="fa fa-pencil"></i> Update</a></span></h6>
                                    {% endif %}
                                    
                                    <div class="row">
                                        <div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20 text-muted" id="profile_hobbies">{{candidate.hobbies|safe|default:'No Hobbies'}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row hobbies collapse fade">
                                <div class="col-xs-12 no-padding">
                                    <form id="hobbies-form" enctype="multipart/form-data" action="." method="post" role="form" class="mt10">
                                        {% csrf_token %}
                                        <div class="row">
                                            <div class="col-xs-12">
                                                <h3 class="text-light text-center mt10"> Hobbies </h3>
                                            </div>
                                        </div>
                                        <div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20">
                                            <div class="row">
                                                <div class="col-xs-12">
                                                    <div class="form-group">
                                                        {% if form_hobbies.hobbies.errors %}
                                                            <ul class="list-unstyled error-list">
                                                                {% for error in form_hobbies.hobbies.errors %}
                                                                    <li>{{error|escape}}</li>
                                                                {% endfor %}
                                                            </ul>
                                                        {% else %}
                                                            <label for="id_hobbies">Share your Hobbies</label>
                                                        {% endif %}
                                                        <div class="{% if form_hobbies.hobbies.errors %}has-error{%endif%}">
                                                            {{form_hobbies.hobbies}}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row mt20 button-row">
                                                <div class="col-md-12">
                                                    <button class="btn btn-info btn-sm btn-block"><i class="fa fa-check-circle fa-lg"></i> Save and Update</button>
                                                    <a class="btn btn-default btn-sm btn-block" href="#hobbies-section" data-toggle="collapse" data-target=".hobbies" style="margin-right:10px;"><i class="fa fa-chevron-circle-left fa-lg"></i> Cancel</a>
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </section>
                        <section class="container-fluid pt20 text-muted {% if not candidate.user == request.user and not candidate.extra_curriculars %}hidden{% endif %}" id="extra-curriculars-section">
                            <div class="row extra_curriculars collapse fade in">
                                <div class="col-xs-12">
                                    <h3 class="text-light text-center mt10">Extra Curriculars</h3>
                                    {%if not company%}
                                        <h6 class="text-center"><span><a class="clickable" data-toggle="collapse" data-target=".extra_curriculars"><i class="fa fa-pencil"></i> Update</a></span></h6>
                                    {% endif %}
                                    
                                    <div class="row">
                                        <div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20 text-muted" id="profile_extra_curriculars">{{candidate.extra_curriculars|safe|default:'No Extra Curriculars'}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row extra_curriculars collapse fade">
                                <div class="col-xs-12">
                                    <form id="extra_curriculars-form" enctype="multipart/form-data" action="." method="post" role="form" class="mt10">
                                        {% csrf_token %}
                                        <div class="row">
                                            <div class="col-xs-12">
                                                <h3 class="text-light text-center mt10"> Extra Curriculars </h3>
                                            </div>
                                        <div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20">
                                            <div class="row">
                                                <div class="col-xs-12">
                                                    <div class="form-group">
                                                        {% if form_extra_curriculars.extra_curriculars.errors %}
                                                            <ul class="list-unstyled error-list">
                                                                {% for error in form_extra_curriculars.extra_curriculars.errors %}
                                                                    <li>{{error|escape}}</li>
                                                                {% endfor %}
                                                            </ul>
                                                        {% else %}
                                                            <label for="id_extra_curriculars">Share your Extra Curriculars</label>
                                                        {% endif %}
                                                        <div class="{% if form_objective.objective.errors %}has-error{%endif%}">
                                                            {{form_extra_curriculars.extra_curriculars}}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row mt20 button-row">
                                                <div class="col-md-12">
                                                    <button class="btn btn-info btn-sm btn-block"><i class="fa fa-check-circle fa-lg"></i> Save and Update</button>
                                                    <a class="btn btn-default btn-sm btn-block" href="#extra-curriculars-section" data-toggle="collapse" data-target=".extra_curriculars" style="margin-right:10px;"><i class="fa fa-chevron-circle-left fa-lg"></i> Cancel</a>
                                                </div>
                                            </div>
                                        </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </section>
                        <section class="container-fluid pt20 text-light {% if not candidate.user == request.user and not candidate.others %}hidden{% endif %}" id="others-section">
                            <div class="row others collapse fade in">
                                <div class="col-xs-12">
                                    <h3 class="text-light text-center mt10">Others</h3>
                                    {%if not company%}
                                        <h6 class="text-center"><span><a class="clickable" data-toggle="collapse" data-target=".others"><i class="fa fa-pencil"></i> Update</a></span></h6>
                                    {% endif %}
                                    
                                    <div class="row">
                                        <div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20 text-muted" id="profile_others">{{candidate.others|safe|default:'No others'}}
                                        </div>                                
                                    </div>
                                </div>
                            </div>
                            <div class="row others collapse fade">
                                <div class="col-xs-12">
                                    <form id="others-form" enctype="multipart/form-data" action="." method="post" role="form" class="mt10">
                                        {% csrf_token %}
                                        <div class="row">
                                            <div class="col-xs-12">
                                                <h3 class="text-light text-center mt10"> Others </h3>
                                            </div>
                                        <div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20">
                                            <div class="row">
                                                <div class="col-xs-12">
                                                    <div class="form-group">
                                                        {% if form_others.others.errors %}
                                                            <ul class="list-unstyled error-list">
                                                                {% for error in form_others.others.errors %}
                                                                    <li>{{error|escape}}</li>
                                                                {% endfor %}
                                                            </ul>
                                                        {% else %}
                                                            <label for="id_others">Anything else you would like to share</label>
                                                        {% endif %}
                                                        <div class="{% if form_objective.objective.errors %}has-error{%endif%}">
                                                            {{form_others.others}}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row mt20 button-row">
                                                <div class="col-md-12">
                                                    <button class="btn btn-info btn-sm btn-block"><i class="fa fa-check-circle fa-lg"></i> Save and Update</button>
                                                    <a class="btn btn-default btn-sm btn-block" href="#others-section" data-toggle="collapse" data-target=".others" style="margin-right:10px;"><i class="fa fa-chevron-circle-left fa-lg"></i> Cancel</a>
                                                </div>
                                            </div>
                                        </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </section>
                        {%if not candidate.user == request.user and not candidate.objective and not candidate.skills and not expertises and not academics and not trainings and not certificates and not projects and not languages and not candidate.interests and not candidate.hobbies and not candidate.extra_curriculars and not candidate.others %}
                            <section class="container-fluid pt20 text-muted">
                                <div class="row">
                                    <div class="col-xs-12">
                                        <h5 class="text-center">Incomplete Profile</h5>
                                    </div>
                                </div>
                            </section>
                        {% endif %}
                    </div>
                </div>
                {%endif%}
                <div class="row tab-pane fade" id="history-tab">
                    <div class="col-sm-9 col-sm-push-3 col-md-8 col-md-push-2">
                        <h3 class="text-center text-light mt40">Applications</h3>
                        {%for postulate in vacancies%}
                            <div class="card mb20">
                                <div class="bg-white pt20 pl40 pb20 pr40 border-bottom border-light" data-id="{{postulate.id}}">
                                    <h4 class="no-margin-bottom clearfix">
                                        <i class="fa fa-briefcase fa-lg"></i>
                                        <a class="" href="{{postulate.vacancy.get_absolute_url}}">{{ postulate.vacancy.employment }}</a>
                                        <span class="inline-block"><small>(No. of Openings - {{postulate.vacancy.vacancies_number}})</small></span>
                                        <span class="pull-right size-xs pt5"><i class="fa fa-flag-o"></i> <span class="text-light">{%if postulate.vacancy_stage%}{{postulate.vacancy_stage}}{%elif postulate.finalize%}Onboarding{%else%}Application{%endif%}</span> Process </span>

                                    </h4>
                                    <p class="clearfix no-margin-bottom"><i class="fa fa-calendar"></i> Posted on {{postulate.vacancy.add_date}}
                                        <span class="pull-right"><i class="fa fa-clock-o"></i> Applied on {{postulate.add_date}}</span>
                                    </p>
                                    <p class="clearfix no-margin-bottom">
                                        <i class="fa fa-map-marker"></i> 
                                        {% if postulate.vacancy.city %}{{postulate.vacancy.city}}, {%endif%}
                                        {% if postulate.vacancy.state %}{{postulate.vacancy.state}}, {%endif%}
                                        {{postulate.vacancy.nationality}}
                                        <span class="pull-right" data-toggle="tooltip" data-trigger="hover" data-placement="right" title="{{postulate.avg_score}}"> {{postulate.avg_stars|safe}}</span>
                                    </p>
                                    <p class="clearfix no-margin-bottom">
                                        <i class="fa fa-gears"></i> {{postulate.vacancy.industry}} 
                                        <small class="pl10 inline-block"> 
                                            -- <i class="pl10 fa fa-cog"></i> {{postulate.vacancy.function}}
                                        </small>
                                        {% if recruiter and candidate.medium %}
                                            <span class="va-top pull-right inline-block mt6 label label-trans lh1 ml5">{{candidate.medium}}</span>
                                        {% endif %}
                                    </p>
                                    <p class="clearfix no-margin-bottom">
                                        <span class="label label-trans size-xs inline-block lh1"><i class="fa fa-black-tie fa-sm"></i> {{postulate.vacancy.employmentType}}</span>
                                        <span class="pull-right"> <i class="fa fa-flag-checkered"></i> <span class="text-light">{{postulate.last_status|default:'In Process'}}</span></span>
                                    </p>
                                </div>
                                <div class="row bg-white border-bottom border-light no-margin pl20">
                                    {% if vacancy.company|args:'AS_RATINGS'|call:'check_service' %}
                                        {% if postulate.ratings %}
                                            <a class="btn btn-xs show-ratings">Ratings <small class="badge badge-light ml5">{{postulate.ratings}}</small></a>
                                        {% else %}
                                            <a class="btn btn-xs text-light disabled">No Ratings </a>
                                        {% endif %}
                                    {% endif %}
                                    {% if vacancy.company|args:'AS_COMMENTS'|call:'check_service' %}
                                        {% if postulate.comments.count %}
                                            <a class="btn btn-xs show-comments">Comments <small class="badge badge-light ml5 comment-count">{{postulate.comments.count}}</small></a>
                                        {% else %}
                                            <a class="btn btn-xs text-light disabled">No Comments</a>
                                        {% endif %}
                                    {% endif %}
                                    <a class="btn btn-xs show-timeline">Timeline</a>
                                    <a class="btn btn-xs pull-right hidden" data-toggle="collapse" data-target="#cover-{{postulate.id}}">Cover/Notes</a>
                                </div>
                                {% if vacancy.company|args:'AS_COMMENTS'|call:'check_service' %}
                                    <div class="collapse fade comment-cards" id="comment-s-{{postulate.id}}">
                                        <div class="row text-center bg-white no-margin pl20 pr20">
                                            {% if postulate.comments.count > 2 %}
                                                <small>
                                                    <a class="clickable comment more collapse fade in " data-toggle="collapse" data-target="#comment-s-{{postulate.id}} .comment.more">See all <span class="comment-count">{{postulate.comments.count}}</span> comments</a>
                                                    <a class="comment more collapse fade clickable" data-toggle="collapse" data-target="#comment-s-{{postulate.id}} .comment.more">Less Comments</a>
                                                </small>
                                            {% endif %}
                                        </div>
                                        
                                        {% for comment in postulate.comments %}
                                            {% if comment.comment_type == 1 %}
                                                <div class="row bg-white no-margin border-bottom border-light pl20 pr20 comment {% if forloop.counter < postulate.comments.count|add:-2 %}collapse fade more{% endif %}">
                                                    <div class="col-xs-12 pt5 pb5 text-light ">
                                                        <img src="{{comment.recruiter.user.photo.url}}" class="navbar-img va-top no-margin-top card-left" data-name="{{comment.recruiter.user.get_full_name}}">
                                                        <div class="ml20 row">
                                                            <h5 class="inline-block no-margin-y">{{comment.recruiter}}</h5>
                                                            <small class="text-muted"> in <a href="{% url 'vacancies_get_vacancy_stage_details' postulate.vacancy.id comment.stage.id %}">{{comment.stage_string}}</a> - <span class="text-light">{{comment.logtime|naturaltime}}</span></small>
                                                            <br>
                                                            <small class="text-muted comment-text">{{comment.text|linebreaks}}</small>
                                                        </div>
                                                    </div>
                                                </div>
                                            {% elif comment.comment_type == 2 %}
                                                <div class="row bg-white no-margin border-bottom border-light pl20 pr20 comment {% if forloop.counter < postulate.comments.count|add:-2 %}collapse fade{% endif %}">
                                                    <div class="col-xs-12  pt5 pb5 text-light ">
                                                        <img src="{{comment.recruiter.user.photo.url}}" class="navbar-img va-top no-margin-top card-left" data-name="{{comment.recruiter.user.get_full_name}}">
                                                        <div class="ml20 row">
                                                            <h5 class="inline-block no-margin-y">{{comment.recruiter}}</h5>
                                                            <small class="pt5 clickable text-muted" data-toggle="collapse" data-target="#comment-{{comment.id}}"> rated <span class="text-light">{{candidate.full_name}}</span> - <span class="inline-block" data-toggle="tooltip" title="{{comment.avg_score}}" data-placement="right"> {{comment.avg_stars|safe}} </span> in <a href="{% url 'vacancies_get_vacancy_stage_details' postulate.vacancy.id comment.stage.id %}">{{comment.stage}}</a> - <span class="text-light">{{comment.logtime|naturaltime}}</span></small><br>
                                                            <div class="mt5 mb5 ml10 mr10 collapse fade" id="comment-{{comment.id}}">
                                                                {% for criterion in comment.get_scores %}
                                                                    <small>{{criterion.name}}</small>
                                                                    <span class="inline-block ml5" data-toggle="tooltip" title="{{criterion.score}}" data-placement="right"> {{criterion.get_stars|safe}}</span><br>
                                                                {% endfor %}
                                                            </div>
                                                            <small class="text-muted comment-text">{{comment.text|linebreaks}}</small>
                                                        </div>
                                                    </div>
                                                </div>
                                            {% endif %}
                                        {% endfor %}

                                        <div class="clickable small text-info bg-white pl40 pt5 pb5 hide-all" data-toggle="collapse" data-target="#comment-s-{{postulate.id}}">Hide Comments</div>
                                    </div>
                                {% endif %}
                                {% if vacancy.company|args:'AS_RATINGS'|call:'check_service' %}
                                    <div class="collapse fade rate-cards" id="rate-s-{{postulate.id}}">

                                        {% for process in postulate.processes %}
                                            {% if process.avg_score %}
                                            <div class="row bg-white no-margin border-bottom border-light pl20 pr20 rate">
                                                <div class="col-xs-12 pt10 pb10 text-light">
                                                    <div class="row no-margin">
                                                        <h4 class="inline-block no-margin-y">OverAll </h4>
                                                        <small class="pt5 text-muted clickable" data-toggle="collapse" data-target=".s-{{postulate.id}}-{{process.id}}" data-parent="#rate-s-{{postulate.id}}"> (for process: {{process}}) - <span class="inline-block" data-toggle="tooltip" data-placement="right" title="{{process.avg_score}}">{{process.avg_stars|safe}}</span></small>
                                                        {% if process.criteria_avg_scores|length > 1 %}
                                                            <div class="mt5 mb5 ml10 mr10 collapse fade s-{{postulate.id}}-{{process.id}}">
                                                                {% for criterion in process.criteria_avg_scores %}
                                                                    <small>{{criterion.0}} <small>(Avg.)</small></small>
                                                                    <span class="inline-block ml5" data-toggle="tooltip" title="{{criterion.1}}" data-placement="right"> {{criterion.2|safe}}</span><br>
                                                                {% endfor %}
                                                            </div>
                                                        {% endif %}
                                                    </div>
                                                </div>
                                            </div>
                                            {% for comment in process.get_comments %}
                                                <div class="row bg-white no-margin border-bottom border-light pl20 pr20 collapse fade rate s-{{postulate.id}}-{{process.id}}">
                                                    <div class="col-xs-12 pt5 pb5 ml40 pr40 text-light ">
                                                        <img src="{{comment.recruiter.user.photo.url}}" class="navbar-img va-top no-margin-top card-left" data-name="{{comment.recruiter.user.get_full_name}}">
                                                        <div class="ml20 row">
                                                            <h5 class="inline-block no-margin-y">{{comment.recruiter}}</h5>
                                                            <small class="pt5 {% if comment.get_scores.count > 1 %} clickable {%endif%} text-muted"  data-toggle="collapse" data-target="#{{comment.id}}" data-parent="#rate-s-{{postulate.id}}"> rated - <span class="inline-block" data-toggle="tooltip" title="{{comment.avg_score}}" data-placement="right"> {{comment.avg_stars|safe}} </span> - <span class="text-light">{{comment.logtime|naturaltime}}</span></small>
                                                            <br>
                                                            {% if comment.get_scores.count > 1 %}
                                                                <div class="mt5 mb5 ml10 mr10 collapse fade" id="{{comment.id}}">
                                                                    {% for criterion in comment.get_scores %}
                                                                        <small>{{criterion.name}}</small>
                                                                        <span class="inline-block ml5" data-toggle="tooltip" title="{{criterion.score}}" data-placement="right"> {{criterion.get_stars|safe}}</span><br>
                                                                    {% endfor %}
                                                                </div>
                                                            {% endif %}
                                                            <small class="text-muted comment-text">{{comment.text|linebreaks}}</small>
                                                        </div>
                                                    </div>
                                                </div>
                                            {% endfor %}
                                            {% endif%}
                                        {% endfor %}
                                        <div class="clickable small bg-white text-info pl40 pt5 pb5 hide-all" data-toggle="collapse" data-target="#rate-s-{{postulate.id}}">Hide Ratings</div>
                                    </div>
                                {% endif %}
                                <div class="collapse fade timeline-cards" id="timeline-s-{{postulate.id}}">
                                        <div class="bg-white border-bottom border-light">
                                            <ul class="timeline timeline-fix"  >
                                                {% for tline in postulate.timeline %}
                                                    <li class="">
                                                        <a class="direction-r mt5 text-light">
                                                            <div class="flag-wrapper">
                                                                <span class="flag">{{tline.logtime}}</span>
                                                                <span class="time-wrapper hidden"><span class="time"></span></span>
                                                            </div>
                                                        </a>
                                                        <div class="desc mb5 no-margin-top">{% if tline.comment_type == 2 %}{{tline.recruiter}} rated <span data-toggle="tooltip" data-placement='top' title="{{tline.avg_score}}">{{tline.avg_stars|safe}}</span> in {{tline.stage}}<br>{% endif %}{{tline.text}}</div>
                                                    </li>
                                                {% endfor %}
                                                {% if not postulate.timeline %}
                                                <i>Nothing to Show</i>
                                                {% endif %}
                                            </ul>
                                        </div>
                                        <div class="clickable bg-white small text-info pl40 pt5 pb5 hide-all" data-toggle="collapse" data-target="#timeline-s-{{postulate.id}}">Hide Timeline</div>
                                </div>
                            </div>
                        {%endfor%}
                    </div>
                </div>
                {% if curriculum.file%}
                    <div class="row tab-pane fade" id="attachment-tab">
                        <div class="col-sm-9 col-sm-push-3 col-md-8 col-md-push-2 pt20 pb20 ">
                            <section class="container-fluid pt20" id="attachment-section">
                                <div class="row">
                                    <div class="col-xs-12">
                                        <h3 class="text-light text-center">
                                            Attachment
                                        </h3>    

                                        <div class="row">
                                            <div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20">

                                                <h6 class="text-center no-margin">
                                                    {% if curriculum.file %}
                                                        <a href="{{ curriculum.file.url }}" target="_blank" class="">
                                                        <i class="fa fa-download"></i>
                                                            {% if curriculum.file.ext == 'pdf' %}
                                                                <i class="fa fa-file-pdf-o"></i>
                                                            {% elif curriculum.file.ext == 'doc' or curriculum.file.ext == 'docx' %}
                                                                <i class="fa fa-file-word-o"></i>
                                                            {% endif %}
                                                            {{curriculum.filename}}
                                                        </a>
                                                    {%else%}
                                                        No Attachments Yet
                                                    {% endif %}
                                                </h6>
                                            </div>                                
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <div class="bg-white pt20 {% if not curriculum.pdf_file %} pl40 pb20 pr40 {% endif %} border-bottom border-light bound">
                                <h5 class="text-center text-light no-margin-top">Quick Preview (Visual Representation may differ in file)</h5 class="text-center text-light">                                    
                                    {% if curriculum.pdf_file %}
                                        <div id="pdf_preview">

                                        </div>
                                    {% elif curriculum.file %}
                                        {{curriculum.filecontent|linebreaks|safe}}
                                    {% else %}
                                        <p class="text-center mt20">No Preview Available</p>
                                    {% endif %}
                            </div>
                        </div>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
    {% if recruiter and recruiter.is_manager and not postulate.vacancy.status.codename == 'closed' %}
        <div class="modal fade" tabindex="-1" role="dialog" id="archiveModal">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title text-center">Archive Candidate</h4>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            {% if vacancy.ban %}
                                <div class="col-xs-12 mt5">Impose Ban for {{vacancy.get_ban_period_display|default:'0'}} for <span class="text-light">{% if vacancy.ban_all %} {{vacancy.function|title}} {% else %} All {% endif %}</span> positions. <span class="pull-right"><input type="checkbox" class="pull-right js-switch ban-temp" checked></span></div>
                            {% endif %}
                                <div class="col-xs-12 mt5"> Ban Permanently <span class="pull-right"><input type="checkbox" class="js-switch ban-perm"></span></div>
                                <div class="col-xs-10 col-xs-push-1 mt5"><button class="btn btn-sm btn-block btn-info archive_confirm"> Archive </button></div>
                            
                            <div class="col-xs-2"></div>
                            <div class="col-xs-5"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {% endif %}
<!-- Content ends -->

{% endblock %}

{% block java_script_srcs %}
    <script src="{{ STATIC_URL }}ajax_upload/js/jquery.iframe-transport.js"></script>
    <script src="{{ STATIC_URL }}ajax_upload/js/ajax-upload-widget_original.js"></script>
    <script src="{{STATIC_URL}}datepicker/js/bootstrap-datepicker.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}ckeditor/ckeditor/ckeditor.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}ckeditor/ckeditor-init.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/switchery/0.8.1/switchery.min.js"></script>
{% endblock %}

{% block java_script_code %}
    <script type="text/javascript">
        $(document).ready(function(){
            // $('#upgradeModal').modal('show')
            var elems = Array.prototype.slice.call(document.querySelectorAll('.js-switch'));
            
            elems.forEach(function(html) {
              var switchery = new Switchery(html,{color:'#5bc0de', size:'small'});
            });
            {% if not candidate.user or not candidate.user == request.user and not candidate.objective and not candidate.skills and not expertises and not academics and not trainings and not certificates and not projects and not languages and not candidate.interests and not candidate.hobbies and not candidate.extra_curriculars and not candidate.others %}
                $('#history-pill').click();
            {% else %}
                $('#spysection').scrollspy();
                // location.hash= "#"
                if(location.hash == '#history-tab'){
                    $('#history-pill').click();
                }
                else {
                    $('#profile-pill').click();
                }
            {% endif %}
        })
        {% if vacancy.company|args:'AS_COMMENTS'|call:'check_service' %}
            $('.show-comments').click(function(){
                $(this).parents('.card').find('.comment-cards').collapse('show');
                $(this).parents('.card').find('.rate-cards').collapse('hide');
                $(this).parents('.card').find('.timeline-cards').collapse('hide');
                $(this).addClass('active');
                $('.show-ratings').removeClass('active hide-all');
                $('.show-timeline').removeClass('active hide-all');
                if(!$(this).hasClass('hide-all')){
                    $(this).addClass('hide-all');
                }
                else {
                    hide_all(this);
                }
            });
            $('.comment-hide').click(function(){
                $(this).parents('.card').find('.comment-cards').collapse('hide');
            })
        {% endif %}
        {% if vacancy.company|args:'AS_RATINGS'|call:'check_service' %}
            $('.show-ratings').click(function(){
                $(this).parents('.card').find('.rate-cards').collapse('show');
                $(this).parents('.card').find('.comment-cards').collapse('hide');
                $(this).parents('.card').find('.timeline-cards').collapse('hide');
                $(this).addClass('active');
                $('.show-comments').removeClass('active hide-all');
                $('.show-timeline').removeClass('active hide-all');
                if(!$(this).hasClass('hide-all')){
                    $(this).addClass('hide-all');
                }
                else {
                    hide_all(this);
                }
            });
        {% endif %}
        $('.show-timeline').click(function(){
            $(this).parents('.card').find('.timeline-cards').collapse('show');
            $(this).parents('.card').find('.comment-cards').collapse('hide');
            $(this).parents('.card').find('.rate-cards').collapse('hide');
            $(this).addClass('active');
            $('.show-comments').removeClass('active hide-all');
            $('.show-ratings').removeClass('active hide-all');
            if(!$(this).hasClass('hide-all')){
                $(this).addClass('hide-all');
            }
            else {
                hide_all(this);
            }
        });

            var hide_all = function($this){
                if(!$this){
                    $this = $(this);
                }
                else {
                    $this = $($this);
                }
                console.log($this)
                $this.parents('.card').find('.show-comments').removeClass('active').removeClass('hide-all');
                $this.parents('.card').find('.show-ratings').removeClass('active').removeClass('hide-all');
                $this.parents('.card').find('.show-timeline').removeClass('active').removeClass('hide-all');
                $this.parents('.card').find('.comment-cards').collapse('hide');
                $this.parents('.card').find('.rate-cards').collapse('hide');
                $this.parents('.card').find('.timeline-cards').collapse('hide');
            }
        $('.hide-all').click(hide_all);
        {% if recruiter%}
            {% if not candidate.user %}
                public = 1
            {% else %}
                public = 0;
            {% endif %}
            $('.send-to-next').click(function(){           
                formdata = [{
                    'public': public,
                    'candidate': '{{postulate.id}}',
                }]
                $this = $(this);
                $this.html('<i class="fa fa-spinner fa-pulse fa-lg"></i> Please Wait').prop('disabled',true).addClass('disabled');
                formdata = JSON.stringify(formdata);
                $.ajax({
                    data: {
                        'formdata':formdata,
                        'vacancy': '{{vacancy.id}}',
                        'process': '{{postulate.vacancy_stage.id}}',
                        'cpage': 1,
                    },
                    url:'/ajax/upgradepostulate/',
                    type: 'POST',
                    complete: function(data){
                        console.log(data)
                    },
                    success: function(data){
                        console.log(data);
                        if(data.success == true){
                            //highlight adn timeout remove after 5 seconds
                            // $this = $(this)
                            // $this.parents('.panel-shadow').css('border','2px solid #337ab7')
                            // setTimeout(function(){
                            //     $this.parents('.panel').addClass('collapse fade in');
                            //     $this.parents('.panel').collapse('toggle');
                            //     setTimeout(function(){

                            //         $this.parents('.panel').remove();
                            //     },500);
                            // },1000)
                            // alert('Application updated')  ;
                            location.href=location.href;                 
                        }
                        else {
                            alert('Could Not update. Please Try Again!')
                        }
                    }
                });
            })
            $('.send-to-back').click(function(){
                formdata = [{
                    'public': public,
                    'candidate': '{{postulate.id}}', 
                }]
                $this = $(this);
                $this.html('<i class="fa fa-spinner fa-pulse fa-lg"></i> Please Wait').prop('disabled',true).addClass('disabled');
                formdata = JSON.stringify(formdata);
                $.ajax({
                    data: {
                        'formdata': formdata,
                        'vacancy': '{{vacancy.id}}',
                        'process': '{{postulate.vacancy_stage.id}}',
                        'cpage': 1,
                    },
                    url:'/ajax/downgradepostulate/',
                    type: 'POST',
                    complete: function(data){
                        console.log(data)
                    },
                    success: function(data){
                        console.log(data);
                        if(data.success == true){
                            //highlight adn timeout remove after 5 seconds
                            // $this = $(this)
                            // $this.parents('.panel-shadow').css('border','2px solid #337ab7')
                            // setTimeout(function(){
                            //     $this.parents('.panel').addClass('collapse fade in');
                            //     $this.parents('.panel').collapse('toggle');
                            //     setTimeout(function(){

                            //         $this.parents('.panel').remove();
                            //     },500);
                            // },1000)

                            // alert('Application updated')  ;
                            location.href=location.href;  
                        }
                        else {
                            alert('Could Not update. Please Try Again!')
                        }
                    }
                });
            })
            $('.send-to-archive').click(function(){
                $this = $(this);
                // $this.html('<i class="fa fa-spinner fa-pulse fa-lg"></i> Please Wait').prop('disabled',true).addClass('disabled');
                $('#archiveModal').modal('show')
                $('#archiveModal').attr({
                    'data-public': public,
                    'data-vacancy': {{vacancy.id}},
                    'data-candidate': {{postulate.id}},
                });
                $('#archiveModal').attr({'data-bulk':'0'})
            });
            $('.archive_confirm').click(function(){
                $this = $(this);
                if( $this.parents('.modal').find('.ban-temp')[0]){
                    ban_temp = $this.parents('.modal').find('.ban-temp')[0].checked;
                }
                else {
                    ban_temp = false;
                }    
                formdata = [{
                    'public': public,
                    'candidate': '{{postulate.id}}', 
                }]
                $this.html('<i class="fa fa-spinner fa-pulse fa-lg"></i> Please Wait').prop('disabled',true).addClass('disabled');
                formdata = JSON.stringify(formdata);
                $.ajax({
                    data: {
                        'formdata': formdata,
                        'vacancy': '{{vacancy.id}}',
                        'process': '{{postulate.vacancy_stage.id}}',
                        'cpage': 1,
                    },
                    url:'/ajax/archivepostulate/',
                    type: 'POST',
                    complete: function(data){
                        console.log(data)
                    },
                    success: function(data){
                        console.log(data);
                        if(data.success == true){
                            //highlight adn timeout remove after 5 seconds
                            // $this = $(this)
                            // $this.parents('.panel-shadow').css('border','2px solid #337ab7')
                            // setTimeout(function(){
                            //     $this.parents('.panel').addClass('collapse fade in');
                            //     $this.parents('.panel').collapse('toggle');
                            //     setTimeout(function(){

                            //         $this.parents('.panel').remove();
                            //     },500);
                            // },1000)

                            // alert('Application updated')  ;
                            location.href=location.href;  
                            $this.parents('.modal').modal('hide');
                        }
                        else {
                            alert('Could Not update. Please Try Again!')
                        }
                    }
                });
            })
        {%endif%}
        String.prototype.splice = function(idx, rem, str) {
            return this.slice(0, idx) + str + this.slice(idx + Math.abs(rem));
        };
        {% if candidate %}
            $('#remove-modal').on('hidden.bs.modal',function(){
                $(this).find('.remove').data('card-type','').data('card','');
                $(this).find('.header').html('');
                $(this).find('.msg').html('');
                $(this).find('.btn').html('Remove').prop('disabled',false).removeClass('disabled');
                $(this).find('button').html('Cancel');
            });
            $('#remove-modal .remove').click(function(){
                $this = $(this).parents('.modal');
                $this.find('.btn').html('<i class="fa fa-pulse fa-spinner fa-lg"></i> Please Wait').prop('disabled',true).addClass('disabled');
                cardtype = $(this).attr('data-card-type');
                cardclass = $(this).attr('data-card');
                console.log(cardtype);
                console.log(cardclass);
                id = cardclass.replace('.'+cardtype+'-form-','')
                console.log(id);
                $.ajax({
                    url: "/ajax/delete_section/",
                    type:'post',
                    data: {
                        id: id,
                        type: cardtype,
                    },
                    complete: function(){
                        $this.find('.btn').html('Remove').prop('disabled',false).removeClass('disabled');
                        $this.find('button').html('Cancel');
                    },
                    success: function(data){
                        console.log(data);
                        if (data.success){
                            $this.modal('hide');
                            $(cardclass).css('border-color:#337ab7');
                            setTimeout(function(){
                                $section = $(cardclass).parents('section');
                                $(cardclass).next('hr').remove();
                                $(cardclass).remove();
                                checkforsurvivors($section);
                            },1000);
                            alert(data.msg);
                        }
                        else {
                            if($this.hasClass('in')){
                                $this.find('msg').html(data.msg);
                                setTimeout(function(){
                                    $this.modal('hide');
                                },2000);
                            }
                            else {
                                alert(data.msg);
                            }
                        }
                    },
                    error: function(error){
                        console.log(error);
                    }
                })
            });
            function removeCard(_this){
                $this = $(_this);
                cardtype = $this.attr('data-card-type');
                cardclass = $this.attr('data-card');
                $('#remove-modal .header').html(cardtype);
                $('#remove-modal .remove').attr('data-card-type',cardtype).attr('data-card',cardclass);
                console.log($('#remove-modal .remove'))
                $('#remove-modal').modal('show');
                // $(cardclass).remove();
            }
        {% endif %}
        var dpicker = {
                format: "yyyy-mm-dd",
                startView: 1,
                minViewMode: 3,
                language: "en",
                autoclose: true
        };
        var academic_status_change = function(){
            $this = $(this);
            $form = $this.parents('form');
            if($this.val() == 5) {
                $form.find('#id_end_date').parents('.form-group').hide();
            }
            else {
                $form.find('#id_end_date').parents('.form-group').show();
            }
        }
        var experience_ongoing = function(){
            $this = $(this);
            $form = $this.parents('form');
            if($this[0].checked){
                $form.find('#id_end_date').parents('.form-group').hide();
            }
            else {
                $form.find('#id_end_date').parents('.form-group').show();
            }
        }
        $(document).ready(function () {
           {% if fileForm.file.errors %}
                $('#post-cv-modal').modal();
           {% endif %}
           {% if form_user_photo.errors %}
                $('#updateimage-modal').modal();
            {% endif %}
           {% if candidate %}
               $('#id_skills').selectize({create:true,createOnBlur:true});
               // $('#id_interests').selectize({create:true,createOnBlur:true});
               // $('#id_extra_curricularss').selectize({create:true,createOnBlur:true});
               // $('#id_hobbies').selectize({create:true,createOnBlur:true});
               // $('#id_others').selectize({create:true,createOnBlur:true});
                
                $('.remove-card').click(function(){
                    removeCard(this);
                })
                $('#id_photo').change(function(){
                    console.log('image changed');
                     if(this.files && this.files[0]) {
                        // var file = e.originalEvent.srcElement.files[i];
                        var img = $('#updateimage-modal img.user-photo');
                        if (this.files[0].size > 1*1024*1024){
                            alert('File exceeds 1MB file size')
                            this.value="";
                        }
                        else {
                            // console.log(img);
                            var reader = new FileReader();
                            reader.onload = function(e) {
                                // console.log(img.attr('src'))
                                 img.attr('src',e.target.result);
                                 // console.log(reader.result)
                                 // console.log(img.attr('src'))
                            }
                            reader.readAsDataURL(this.files[0]);
                        }
                        // $("input").after(img);
                    }
                });
            {%endif%}
            $('#academic-section [id=id_status]').change(academic_status_change);
            $('#experience-section [id=id_present]').change(experience_ongoing);
            $('#id_birthday').datepicker({
                    format: "yyyy-mm-dd",
                    startView: 2,
                    minViewMode: 3,
                    language: "en",
                    autoclose: true,
                    startDate: '-60y',
                    endDate: '-18y'
            });
            
            $('[id=id_end_date]').datepicker(dpicker);
            $('[id=id_start_date]').datepicker(dpicker);
        });
        function toreadabledate(d){
            var monthNames = ["Jan.", "Feb.", "Mar.", "Apr.", "May", "Jun.", "Jul.", "Aug.", "Sep.", "Oct.", "Nov.", "Dec."];
            date = new Date(d);
            month = monthNames[date.getMonth()]

            return month + ' ' + date.getDate() + ', ' + date.getYear();
        }
        function discardform(_this,add){
            $section = $(_this).parents('section');
            if($section){
                $section = $(_this).attr('href');
            }
            console.log(_this)
            $(_this).parents('form').parent().remove();
            $(add).show();
            checkforsurvivors($section);
        }
        /* Validating Form */
            //Personal

                $('form#candidate-form').submit(function(e){
                    e.preventDefault();
                    $this = $(this);

                    // Clear Error Highlights before submission
                    $this.find('.error-list').remove();
                    $this.find('.has-error').removeClass('has-error');

                    //Parse data for submission
                    var formdata = $(this).serializeArray();
                    formdata.push({'name':'isPublic','value':false})

                    //Disable buttons
                    $this.find('.btn').html('<i class="fa fa-pulse fa-spinner fa-lg"></i> Please Wait').prop('disabled',true).addClass('disabled');

                    //Send Ajax Request
                    $.ajax({
                        url : "/ajax/validate_personal_form/",
                        type: 'post',
                        data: formdata,
                        complete: function(data){
                            //Revert buttons back to original
                            $this.find('.btn-info').html('<i class="fa fa-check-circle fa-lg"></i> Save and Update');
                            $this.find('.btn-default').html('<i class="fa fa-chevron-circle-left fa-lg"></i> Cancel');
                            $this.find('.btn').prop('disabled',false);
                            $this.find('.btn').removeClass('disabled');
                        },
                        success: function(data){
                            console.log(data);
                            if (data.success == true){
                                //Hide form and show details
                                $('.personal-profile').collapse('toggle');
                                //Update each field
                                $('#profile_name').html($('#id_first_name').val() + ' ' + $('#id_last_name').val());
                                if($('#id_birthday').val()){
                                    $('#profile_birthday').html(toreadabledate($('#id_birthday').val()));
                                    $('#profile_birthday').parent().removeClass('hidden');
                                }
                                else {
                                    $('#profile_birthday').html('Not Provided');
                                    $('#profile_birthday').parent().addClass('hidden');                                    
                                }
                                if($('#id_gender').val()){
                                    $('#profile_gender').html($('#id_gender option:selected').text());
                                        $('#profile_gender').parent().removeClass('hidden');
                                }
                                else {
                                    $('#profile_gender').html('Not Provided');
                                    $('#profile_gender').parent().addClass('hidden');
                                }
                                if($('#id_maritalStatus').val()){
                                    $('#profile_marital_status').html($('#id_maritalStatus option:selected').text());
                                    $('#profile_marital_status').parent().removeClass('hidden');
                                }
                                else {
                                    $('#profile_marital_status').html('Not Provided');
                                    $('#profile_marital_status').parent().addClass('hidden');
                                }
                                // $('#profile_image')
                                window.location.hash = '#profile';
                                alert(data.msg);
                            }
                            else{ 
                                //Handle Errors
                                // Show errors for all fields available
                                if ('first_name' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_first_name]');
                                    console.log(data.errors.first_name)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_first_name').parents('.form-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.first_name).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('last_name' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_last_name]');
                                    console.log(data.errors.last_name)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_last_name').parents('.form-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.last_name).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('gender' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_gender]');
                                    console.log(data.errors.gender)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_gender').parents('.form-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.gender).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('birthday' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_birthday]');
                                    console.log(data.errors.birthday)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_birthday').parents('.form-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.birthday).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('maritalStatus' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_maritalStatus]');
                                    console.log(data.errors.maritalStatus)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_maritalStatus').parents('.form-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.maritalStatus).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('min_salary' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_min_salary]');
                                    console.log(data.errors.min_salary)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_min_salary').parents('.form-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.min_salary).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('max_salary' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_max_salary]');
                                    console.log(data.errors.max_salary)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_max_salary').parents('.form-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.max_salary).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('travel' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_travel]');
                                    console.log(data.errors.travel)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_travel').parents('.form-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.travel).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('residence' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_residence]');
                                    console.log(data.errors.residence)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_residence').parents('.form-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.residence).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                            }
                        },  
                        error: function(e){
                            console.log(e);
                        }
                    });
                    return false;
                });

            //Contact

                $('form#contact-form').submit(function(e){
                    e.preventDefault();
                    $this = $(this);

                    // Clear Error Highlights before submission
                    $this.find('.error-list').remove();
                    $this.find('.has-error').removeClass('has-error');

                    //Parse data for submission
                    var formdata = $(this).serializeArray();
                    formdata.push({'name':'isPublic','value':false})

                    //Disable buttons
                    $this.find('.btn').html('<i class="fa fa-pulse fa-spinner fa-lg"></i> Please Wait').prop('disabled',true).addClass('disabled');

                    //Send Ajax Request
                    $.ajax({
                        url : "/ajax/validate_contact_form/",
                        type: 'post',
                        data: formdata,
                        complete: function(data){
                            //Revert buttons back to original
                            $this.find('.btn-info').html('<i class="fa fa-check-circle fa-lg"></i> Save and Update');
                            $this.find('.btn-default').html('<i class="fa fa-chevron-circle-left fa-lg"></i> Cancel');
                            $this.find('.btn').prop('disabled',false);
                            $this.find('.btn').removeClass('disabled');
                        },
                        success: function(data){
                            console.log(data);
                            if (data.success == true){
                                //Hide form and show details
                                $('.contact').collapse('toggle');
                                //Update each field
                                if($('#id_city').val() || $('#id_state').val() || $('#id_nationality').val()){
                                    $('#profile_address').html($('#id_city').val() + ', ' + $('#id_state').val()  + ', ' + $('#id_nationality option:selected').text());
                                    $('#profile_address').parent().removeClass('hidden');                                   
                                }
                                else {
                                    $('#profile_address').parent().addClass('hidden');                                  
                                }
                                if($('#id_phone').val()){                        
                                    $('#profile_phone').html(' ' + $('#id_phone').val().replace('-','').splice(3,0,'-').splice(7,0,'-'));
                                    $('#profile_phone').parent().removeClass('hidden');
                                }
                                else {
                                    $('#profile_phone').parent().addClass('hidden');
                                }
                                if($('#id_cellphone').val()){
                                    $('#profile_cellphone').html(' ' +$('#id_cellphone').val().replace('-','').splice(3,0,'-').splice(7,0,'-'));
                                    $('#profile_cellphone').parent().removeClass('hidden');               
                                }
                                else {
                                    $('#profile_cellphone').parent().addClass('hidden');
                                }
                                if($('#id_twitter').val()){
                                    $('#profile_twitter').attr('href','http://twitter.com/'+$('#id_twitter').val().replace('@',''));
                                    $('#profile_twitter').removeClass('hidden');
                                    $('#profile_twitter').parents('.social-icons').removeClass('hidden');
                                }
                                else {
                                    $('#profile_twitter').addClass('hidden');
                                }
                                if($('#id_facebook').val()){
                                    $('#profile_facebook').attr('href',$('#id_facebook').val());
                                    $('#profile_facebook').removeClass('hidden');
                                    $('#profile_facebook').parents('.social-icons').removeClass('hidden');
                                }
                                else {
                                    $('#profile_facebook').addClass('hidden');
                                }
                                if($('#id_linkedin').val()){
                                    $('#profile_linkedin').attr('href',$('#id_linkedin').val());
                                    $('#profile_linkedin').removeClass('hidden');
                                    $('#profile_linkedin').parents('.social-icons').removeClass('hidden');
                                }
                                else {
                                    $('#profile_linkedin').addClass('hidden');
                                }
                                if($('#id_google').val()){
                                    $('#profile_google').attr('href',$('#id_google').val());
                                    $('#profile_google').removeClass('hidden');
                                    $('#profile_google').parents('.social-icons').removeClass('hidden');
                                }
                                else {
                                    $('#profile_google').addClass('hidden');
                                }
                                // $('#profile_image')
                                window.location.hash = '#contact-section';
                                alert(data.msg);
                            }
                            else{ 
                                //Handle Errors
                                // Show errors for all fields available
                                if ('nationality' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_nationality]');
                                    console.log(data.errors.nationality)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_nationality').parents('.form-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.nationality).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('state' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_state]');
                                    console.log(data.errors.state)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_state').parents('.form-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.state).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('city' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_city]');
                                    console.log(data.errors.city)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_city').parents('.form-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.city).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('phone' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_phone]');
                                    console.log(data.errors.phone)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_phone').parents('.form-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.phone).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('cellphone' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_cellphone]');
                                    console.log(data.errors.cellphone)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_cellphone').parents('.form-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.cellphone).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('linkedin' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_linkedin]');
                                    console.log(data.errors.linkedin)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_linkedin').parents('.form-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.linkedin).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('facebook' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_facebook]');
                                    console.log(data.errors.facebook)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_facebook').parents('.form-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.facebook).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('twitter' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_twitter]');
                                    console.log(data.errors.twitter)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_twitter').parents('.form-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.twitter).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('google' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_google]');
                                    console.log(data.errors.google)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_google').parents('.form-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.google).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                            }
                        },  
                        error: function(e){
                            console.log(e);
                        }
                    });
                    return false;
                });
            
            //Objective

                $('form#objective-form').submit(function(e){
                    e.preventDefault();
                    $this = $(this)

                    // Clear Error Highlights before SUbmission
                    $this.find('.error-list').remove();
                    $this.find('.has-error').removeClass('has-error');

                    // Parse data for submission
                    var formdata = $(this).serializeArray();
                    formdata.push({'name':'isPublic','value':false})

                    // Disable buttons
                    $this.find('.btn').html('<i class="fa fa-pulse fa-spinner fa-lg "></i> Please Wait');
                    $this.find('.btn').prop('disabled',true);
                    $this.find('.btn').removeClass('disabled');

                    // Send Ajax request
                    $.ajax({
                        url: '/ajax/validate_objective_form/',
                        type:'post',
                        data:formdata,
                        complete: function(){
                            $this.find('.btn-info').html('<i class="fa fa-check-circle fa-lg"></i> Save and Update');
                            $this.find('.btn-default').html('<i class="fa fa-chevron-circle-left fa-lg"></i> Cancel')
                            $this.find('.btn').prop('disabled',false);
                            $this.find('.btn').removeClass('disabled'); 
                        },
                        success: function(data){
                            console.log(data);
                            if(data.success == true){
                                // Hide form and show details
                                $('.objective-skills').collapse('toggle');
                                // Update each field
                                $('#profile_objective').html($('#id_objective').val());
                                skills = $('#id_skills').val().split(',');
                                $('#profile_skills').html('');
                                $(skills).each(function(k,el){
                                    html  = '<div class="col-md-4 mb10"><i class="material-icons">label</i> <span class="va-top">'+el+'</span></div>';
                                    $('#profile_skills').append(html);
                                });
                                window.location.hash = '#objective-section';
                                alert(data.msg);
                            }
                            else {
                                //show errors
                                if ('objective' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_objective]');
                                    console.log(data.errors.objective)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_objective').parents('.form-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.objective).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('skills' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_skills]');
                                    console.log(data.errors.skills)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_skills').parents('.form-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.skills).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                            }
                        },
                        error: function(e){
                            console.log(e);
                        }
                    });
                    return false;
                });

            //Interests
                $('form#interests-form').submit(function(e){
                    e.preventDefault();
                    $this = $(this);
                    //Clear Error Highlights before Submisison
                    $this.find('.error-list').remove();
                    $this.find('.has-error').removeClass('has-error');
                    //Parse data for submission
                    var formdata = $(this).serializeArray();
                    formdata.push({'name':'isPublic','value':false})
                    formdata[1].value = CKEDITOR.instances['id_interests'].getData();
                    // console.log(formdata)
                    //Disable buttons
                    $this.find('.btn').html('<i class="fa fa-pulse fa-spinner fa-lg"></i> Please Wait').prop('disabled',true).removeClass('disabled');
                    //Send Ajax Request
                    $.ajax({
                        url: '/ajax/validate_interests_form/',
                        type: 'post',
                        data: formdata,
                        complete: function(){
                            $this.find('.btn-info').html('<i class="fa fa-check-circle fa-lg"></i> Save and Update');
                            $this.find('.btn-default').html('<i class="fa fa-chevron-circle-left fa-lg"></i> Cancel');
                            $this.find('.btn').prop('disabled',false).removeClass('disabled');
                        },
                        success: function(data){
                            console.log(data);
                            if(data.success == true){
                                // Hide form and show details
                                $('.interests').collapse('toggle');
                                // Update each field
                                $('#profile_interests').html($('#id_interests').val());
                                window.location.hash = '#interests-section';
                                alert(data.msg);
                            }
                            else {
                                //show errors
                                if ('interests' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_interests]');
                                    console.log(data.errors.interests)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_interests').parents('.form-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.interests).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }

                            }
                        },
                        error: function(e){
                            console.log(e);
                        }
                    });
                    return false; 
                });

            //Hobbies
                $('form#hobbies-form').submit(function(e){
                    e.preventDefault();
                    $this = $(this);
                    //Clear Error Highlights before Submisison
                    $this.find('.error-list').remove();
                    $this.find('.has-error').removeClass('has-error');
                    //Parse data for submission
                    var formdata = $(this).serializeArray();
                    formdata.push({'name':'isPublic','value':false})
                    formdata[1].value = CKEDITOR.instances['id_hobbies'].getData();
                    //Disable buttons
                    $this.find('.btn').html('<i class="fa fa-pulse fa-spinner fa-lg"></i> Please Wait').prop('disabled',true).removeClass('disabled');
                    //Send Ajax Request
                    $.ajax({
                        url: '/ajax/validate_hobbies_form/',
                        type: 'post',
                        data: formdata,
                        complete: function(){
                            $this.find('.btn-info').html('<i class="fa fa-check-circle fa-lg"></i> Save and Update');
                            $this.find('.btn-default').html('<i class="fa fa-chevron-circle-left fa-lg"></i> Cancel');
                            $this.find('.btn').prop('disabled',false).removeClass('disabled');
                        },
                        success: function(data){
                            console.log(data);
                            if(data.success == true){
                                // Hide form and show details
                                $('.hobbies').collapse('toggle');
                                // Update each field
                                $('#profile_hobbies').html($('#id_hobbies').val());
                                window.location.hash = '#hobbies-section';
                                alert(data.msg);
                            }
                            else {
                                //show errors
                                if ('hobbies' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_hobbies]');
                                    console.log(data.errors.hobbies)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_hobbies').parents('.form-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.hobbies).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }

                            }
                        },
                        error: function(e){
                            console.log(e);
                        }
                    });
                    return false; 
                });

            //Extra_curriculars
                $('form#extra_curriculars-form').submit(function(e){
                    e.preventDefault();
                    $this = $(this);
                    //Clear Error Highlights before Submisison
                    $this.find('.error-list').remove();
                    $this.find('.has-error').removeClass('has-error');
                    //Parse data for submission
                    var formdata = $(this).serializeArray();
                    formdata.push({'name':'isPublic','value':false})
                    formdata[1].value = CKEDITOR.instances['id_extra_curriculars'].getData();
                    //Disable buttons
                    $this.find('.btn').html('<i class="fa fa-pulse fa-spinner fa-lg"></i> Please Wait').prop('disabled',true).removeClass('disabled');
                    //Send Ajax Request
                    $.ajax({
                        url: '/ajax/validate_extra_curriculars_form/',
                        type: 'post',
                        data: formdata,
                        complete: function(){
                            $this.find('.btn-info').html('<i class="fa fa-check-circle fa-lg"></i> Save and Update');
                            $this.find('.btn-default').html('<i class="fa fa-chevron-circle-left fa-lg"></i> Cancel');
                            $this.find('.btn').prop('disabled',false).removeClass('disabled');
                        },
                        success: function(data){
                            console.log(data);
                            if(data.success == true){
                                // Hide form and show details
                                $('.extra_curriculars').collapse('toggle');
                                // Update each field
                                $('#profile_extra_curriculars').html($('#id_extra_curriculars').val());
                                window.location.hash = '#extra-curriculars-section';
                                alert(data.msg);
                            }
                            else {
                                //show errors
                                if ('extra_curriculars' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_extra_curriculars]');
                                    console.log(data.errors.extra_curriculars)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_extra_curriculars').parents('.form-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.extra_curriculars).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }

                            }
                        },
                        error: function(e){
                            console.log(e);
                        }
                    });
                    return false; 
                });

            //Others
                $('form#others-form').submit(function(e){
                    e.preventDefault();
                    $this = $(this);
                    //Clear Error Highlights before Submisison
                    $this.find('.error-list').remove();
                    $this.find('.has-error').removeClass('has-error');
                    //Parse data for submission
                    var formdata = $(this).serializeArray();
                    formdata.push({'name':'isPublic','value':false})
                    formdata[1].value = CKEDITOR.instances['id_others'].getData();
                    //Disable buttons
                    $this.find('.btn').html('<i class="fa fa-pulse fa-spinner fa-lg"></i> Please Wait').prop('disabled',true).removeClass('disabled');
                    //Send Ajax Request
                    $.ajax({
                        url: '/ajax/validate_others_form/',
                        type: 'post',
                        data: formdata,
                        complete: function(){
                            $this.find('.btn-info').html('<i class="fa fa-check-circle fa-lg"></i> Save and Update');
                            $this.find('.btn-default').html('<i class="fa fa-chevron-circle-left fa-lg"></i> Cancel');
                            $this.find('.btn').prop('disabled',false).removeClass('disabled');
                        },
                        success: function(data){
                            console.log(data);
                            if(data.success == true){
                                // Hide form and show details
                                $('.others').collapse('toggle');
                                // Update each field
                                $('#profile_others').html($('#id_others').val());
                                window.location.hash = '#others-section';
                                alert(data.msg);
                            }
                            else {
                                //show errors
                                if ('others' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_others]');
                                    console.log(data.errors.others)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_others').parents('.form-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.others).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }

                            }
                        },
                        error: function(e){
                            console.log(e);
                        }
                    });
                    return false; 
                });

            //Experience
                function update_experience(_this,e){
                    $this = $(_this);
                    // alert('submitting');
                    e.preventDefault();

                    // Clear Error Highlights before SUbmission
                    $this.find('.error-list').remove();
                    $this.find('.has-error').removeClass('has-error');

                    // Parse data for submission
                    var formdata = $this.serializeArray();
                    formdata.push({'name':'isPublic','value':false})

                    // Disable buttons
                    $this.find('.btn').html('<i class="fa fa-pulse fa-spinner fa-lg "></i> Please Wait');
                    $this.find('.btn').prop('disabled',true);
                    $this.find('.btn').removeClass('disabled');
                    id = $this.data('id');
                    if(!id){
                        id=0;
                    }
                    formdata.push({'name':'id','value':id})

                    //Send Ajax Request
                    $.ajax({
                        url: '/ajax/validate_experience_form/',
                        type:'post',
                        data:formdata,
                        complete: function(data){
                                $this.find('.btn-info').html('<i class="fa fa-check-circle fa-lg"></i> Save and Update');
                                $this.find('.btn-default').html('<i class="fa fa-chevron-circle-left fa-lg"></i> Cancel');
                                $this.find('.btn').prop('disabled',false);
                                $this.find('.btn').removeClass('disabled');
                        },
                        success: function(data){
                            console.log(data);
                            if(data.success == true){
                                if(id>0){
                                    q = '.experience-form-'+id
                                    $(q).collapse('toggle');
                                    $row = $(q + ':not(.form-row)');
                                    // $this = $(q + '.form-row');
                                    $row.find('.experience_company').html($this.find('#id_company').val());
                                    // $row.find('.experience_industry').html($this.find('#id_industry option:selected').text());
                                    $row.find('.experience_employment').html($this.find('#id_employment').val());
                                    var duration="--";
                                    $row.find('.experience_duration').html(duration);
                                    $row.find('.experience_tasks').html($this.find('#id_tasks').val());
                                    city = $this.find('#id_city').val()
                                    state = $this.find('#id_state').val()
                                    address=""
                                    if(city){
                                        address = city + ', ';
                                    }
                                    if(state){
                                        address += state + ', ';
                                    }
                                    $row.find('.experience_location').html(address + $this.find('#id_country option:selected').text())
                                    startdate = toreadabledate($this.find('#id_start_date').val());
                                    endddate = toreadabledate($this.find('#id_end_date').val());
                                    if ($this.find('#id_present').val() == "on") {
                                        enddate = "Current Job";
                                    }
                                    $row.find('.experience_date').html(startdate + ' - ' + enddate);
                                }
                                else {
                                    // q='.experience-form-0:not(';
                                    // $(q).collapse('toggle');
                                    // $this = $(q);
                                    city = $this.find('#id_city').val()
                                    state = $this.find('#id_state').val()
                                    address=""
                                    if(city){
                                        address = city + ', ';
                                    }
                                    if(state){
                                        address += state + ', ';
                                    }
                                    address += $this.find('#id_country option:selected').text();
                                    startdate = toreadabledate($this.find('#id_start_date').val());
                                    enddate = toreadabledate($this.find('#id_end_date').val());
                                    if ($this.find('#id_status').val() == 5) {
                                        enddate = "ongoing";
                                    }
                                    var removefunction = "remove_experience('"+$this.find('#id_course_name').val()+"', '"+data.del_url+"')";
                                    removefunction = '<a href type="button" data-toggle="modal" data-target="#del-experience-modal" onclick="'+removefunction+'">'+ ' Remove';
                                    console.log(removefunction)
                                    html = '<div class="row experience-form-'+data.id+' collapse fade in">'+
                                                '<div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20">'+
                                                    '<h4 class="pl15 pr15">'+
                                                        '<i class="fa fa-briefcase"></i> <span class="experience_employment">'+$this.find('#id_employment').val()+'</span>'+
                                                        ' | <small>'+
                                                            '<a data-toggle="collapse" data-target=".experience-form-'+data.id+'" class="clickable">Update</a>'+
                                                            ' - '+
                                                            '<a class="clickable remove-card" data-card=".experience-form-'+data.id+'" data-card-type="experience"> Remove</a>'+
                                                        '</small>'+
                                                        '<small class="pull-right hidden"><i class="fa fa-clock-o"></i> <span class="experience_duration">'+$this.find('#id_start_date').val()+'</span></small>'+
                                                    '</h4>'+
                                                    '<div class="container-fluid">'+
                                                        '<div class="row">'+
                                                            '<div class="col-md-6">'+
                                                                '<h4 class=""><i class="fa fa-building"></i> <span class="#experience_company">'+$this.find('#id_company').val()+'</span></h4>'+
                                                                '<span><i class="fa fa-map-marker"></i> <span class="experience_location">'+address+'</span></span>'+
                                                            '</div>'+
                                                            '<div class="col-md-6 text-right pt10">'+
                                                                '<small class=""><i class="fa fa-calendar"></i> <span class="experience_date">'+startdate + ' - ' + enddate+'</span></small>'+
                                                            '</div>'+
                                                        '</div>'+
                                                        '<p class="mt10"><span class="experience_tasks">'+$this.find('#id_tasks').val()+'</span></p>'
                                                    '</div>'+
                                                '</div>'+
                                            '</div>';
                                    $card = $(html).insertBefore($this.parent());
                                    $this.attr('data-id',data.id);
                                    $this.attr('action',$this.attr('action')+data.id+'/');
                                    $this.attr('id','experience-form-'+data.id);
                                    $card.find('.remove-card').click(function(){removeCard(this);});
                                    $this.parent().removeClass('experience-form-0 in');
                                    $this.parent().addClass('experience-form-'+data.id);
                                    $this.find('.form-destruct').unbind('click');
                                    $this.find('.form-destruct').attr('data-toggle','collapse');
                                    $this.find('.form-destruct').attr('data-toggle','.experience-form-'+data.id);
                                    $this.find('.form-destruct').removeClass('form-destruct');
                                    $('.add_experience_form').show();
                                }
                                window.location.hash = '#experience-section';
                                alert(data.msg);
                            }
                            else {
                                //Show error
                                if ('company' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_company]');
                                    console.log(data.errors.company)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_company').parents('.input-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.company).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('industry' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_industry]');
                                    console.log(data.errors.industry)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_industry').parents('.input-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.industry).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('country' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_country]');
                                    console.log(data.errors.country)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_country').parents('.input-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.country).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('employment' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_employment]');
                                    console.log(data.errors.employment)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_employment').parents('.input-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.employment).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('tasks' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_tasks]');
                                    console.log(data.errors.tasks)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_tasks').parent().addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.tasks).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('end_date' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_end_date]');
                                    console.log(data.errors.end_date)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_end_date').parents('.input-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.end_date).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('city' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_city]');
                                    console.log(data.errors.city)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_city').parents('.input-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.city).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('state' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_state]');
                                    console.log(data.errors.state)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_state').parents('.input-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.state).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('start_date' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_start_date]');
                                    console.log(data.errors.start_date)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_start_date').parents('.input-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.start_date).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                            }   
                        },
                        error: function(e){
                            console.log(e);
                        }
                    })
                }
                $('form[id^=experience-form]').submit(function(e){update_experience(this,e);});
                $('.add_experience_form').click(function(){
                    $(this).hide();
                    experience_form = $('#experience_form').clone();
                    experience_form.attr('id','');
                    experience_form.addClass('in form-row');
                    experience_form.find('.form-destruct').click(function(){
                        if($(this).hasClass('form-destruct')){
                            add = $(this).parents('section').find('.form-add');
                            discardform(this,add);
                        }
                    })
                    experience_form.find('#id_start_date').datepicker(dpicker);
                    experience_form.find('#id_end_date').datepicker(dpicker);
                    experience_form.find('#id_present').change(experience_ongoing);
                    experience_form.insertAfter($('#experience_form'));
                    $('.form-row #experience-form-0').submit(function(e){update_experience(this,e)});
                });
            
            //Academic
                function update_academic(_this,e){
                    $this = $(_this);
                    e.preventDefault();
                    // Clear Error Highlights before SUbmission
                    $this.find('.error-list').remove();
                    $this.find('.has-error').removeClass('has-error');
                    // Pars data for submission
                    var formdata = $this.serializeArray();
                    formdata.push({'name':'isPublic','value':false})
                    //Disable buttons
                    $this.find('.btn').html('<i class="fa fa-pulse fa-spinner fa-lg "></i> Please Wait');
                    $this.find('.btn').prop('disabled',true);
                    $this.find('.btn').removeClass('disabled');
                    var id = $this.attr('data-id');
                    if(!id){
                        id=0;
                    }
                    formdata.push({'name':'id', 'value':id})
                    //Send Ajax request
                    $.ajax({
                        url:'/ajax/validate_academic_form/',
                        type:'post',
                        data:formdata,
                        complete: function(data){
                            $this.find('.btn-info').html('<i class="fa fa-check-circle fa-lg"></i> Save and Update');
                            $this.find('.btn-default').html('<i class="fa fa-chevron-circle-left fa-lg"></i> Cancel');
                            $this.find('.btn').prop('disabled',false);
                            $this.find('.btn').removeClass('disabled');
                        },
                        success: function(data){
                            console.log(data);
                            if(data.success == true){
                                if(id>0){
                                    q = '.academic-form-'+id
                                    $(q).collapse('toggle');
                                    $row = $(q + ':not(.form-row)');
                                    // $this = $(q + '.form-row');
                                    $row.find('.academic_coursename').html($this.find('#id_course_name').val()+', '+$this.find('#id_area').val());
                                    $row.find('.academic_degree').html($this.find('#id_degree option:selected').text());
                                    $row.find('.academic_status').html($this.find('#id_status option:selected').text());
                                    $row.find('.academic_school').html($this.find('#id_school').val());
                                    city = $this.find('#id_city').val()
                                    state = $this.find('#id_state').val()
                                    address=""
                                    if(city){
                                        address = city + ', ';
                                    }
                                    if(state){
                                        address += state + ', ';
                                    }
                                    $row.find('.academic_location').html(address + $this.find('#id_country option:selected').text())
                                    startdate = toreadabledate($this.find('#id_start_date').val());
                                    if ($this.find('#id_status').val() == 5) {
                                        enddate = "ongoing";
                                    }
                                    else {
                                        endddate = toreadabledate($this.find('#id_end_date').val());
                                    }
                                    $row.find('.academic_date').html(startdate + ' - ' + enddate);
                                }
                                else {
                                    // q='.academic-form-0:not(';
                                    // $(q).collapse('toggle');
                                    // $this = $(q);
                                    city = $this.find('#id_city').val()
                                    state = $this.find('#id_state').val()
                                    address=""
                                    if(city){
                                        address = city + ', ';
                                    }
                                    if(state){
                                        address += state + ', ';
                                    }
                                    startdate = toreadabledate($this.find('#id_start_date').val());
                                    enddate = toreadabledate($this.find('#id_end_date').val());
                                    if ($this.find('#id_status').val() == 5) {
                                        enddate = "ongoing";
                                    }
                                    html = '<div class="row academic-form-'+data.id+' collapse fade in">'+
                                                '<div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20">'+
                                                    '<h4 class="pl15 pr15">'+
                                                        '<i class="fa fa-certificate"></i> <span class="academic_coursename">'+$this.find('#id_course_name').val()+', '+$this.find('#id_area').val()+'</span>'+
                                                        ' | <small>'+
                                                            '<a data-toggle="collapse" data-target=".academic-form-'+data.id+'" class="clickable">Update</a>'+
                                                            ' - '+
                                                            '<a class="clickable remove-card" data-card=".academic-form-'+data.id+'" data-card-type="academic"> Remove</a>'+
                                                        '</small>'+
                                                        '<small class="pull-right"><i class="fa fa-flag-checkered"></i> <span class="academic_status">'+$this.find('#id_status option:selected').text()+'</span></small>'+
                                                    '</h4>'+
                                                    '<h5 class="pl15 pr15 no-margin-bottom"><i class="fa fa-mortar-board"></i> <span class="academic_degree">'+$this.find('#id_degree option:selected').text()+'</span></h5>'+
                                                    '<div class="container-fluid">'+
                                                        '<div class="row">'+
                                                            '<div class="col-md-6">'+
                                                                '<h5 class=""><i class="fa fa-university"></i> <span class="academic_school">'+$this.find('#id_school').val()+'</span></h5>'+
                                                                '<span><i class="fa fa-map-marker"></i> <span class="academic_location">'+address + $this.find('#id_country option:selected').text()+'</span></span>'+
                                                            '</div>'+
                                                            '<div class="col-md-6 text-right pt10">'+
                                                                '<small class=""><i class="fa fa-calendar"></i> <span class="academic_date">'+startdate + ' - ' + enddate+'</span></small>'+
                                                            '</div>'+
                                                        '</div>'+
                                                    '</div>'+
                                                '</div>'+
                                            '</div>';
                                    $card = $(html).insertBefore($this.parent());
                                    $this.attr('data-id',data.id);
                                    $this.attr('action',$this.attr('action')+data.id+'/');
                                    $this.attr('id','training-form-'+data.id);
                                    $card.find('.remove-card').click(function(){removeCard(this);});
                                    $this.parent().removeClass('academic-form-0 in');
                                    $this.parent().addClass('academic-form-'+data.id);
                                    $this.find('.form-destruct').unbind('click');
                                    $this.find('.form-destruct').attr('data-toggle','collapse');
                                    $this.find('.form-destruct').attr('data-target','.academic-form-'+data.id);
                                    $this.find('.form-destruct').removeClass('form-destruct');
                                    $('.add_academic_form').show();
                                }
                                window.location.hash = '#academic-section';
                                alert(data.msg);
                            }
                            else {
                                //Show error
                                if ('area' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_area]');
                                    console.log(data.errors.area)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_area').parents('.input-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.area).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('course_name' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_course_name]');
                                    console.log(data.errors.course_name)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_course_name').parents('.input-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.course_name).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('degree' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_degree]');
                                    console.log(data.errors.degree)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_degree').parents('.input-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.degree).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('city' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_city]');
                                    console.log(data.errors.city)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_city').parents('.input-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.city).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('country' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_country]');
                                    console.log(data.errors.country)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_country').parents('.input-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.country).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('end_date' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_end_date]');
                                    console.log(data.errors.end_date)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_end_date').parents('.input-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.end_date).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('school' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_school]');
                                    console.log(data.errors.school)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_school').parents('.input-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.school).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('state' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_state]');
                                    console.log(data.errors.state)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_state').parents('.input-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.state).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('start_date' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_start_date]');
                                    console.log(data.errors.start_date)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_start_date').parents('.input-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.start_date).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('status' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_status]');
                                    console.log(data.errors.status)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_status').parents('.input-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.status).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                            }   
                        },
                        error: function(e){
                            console.log(e);
                        }
                    })
                }
                $('[id^=academic-form]').submit(function(e){update_academic(this,e)});
                $('.add_academic_form').click(function(){
                    $(this).hide();
                    academic_form = $('#academic_form').clone();
                    academic_form.attr('id','');
                    academic_form.addClass('in form-row');
                    academic_form.find('.form-destruct').click(function(){
                        if($(this).hasClass('form-destruct'))
                        {
                            add = $(this).parents('section').find('.form-add');
                            discardform(this,add);
                        }
                    })
                    academic_form.find('#id_start_date').datepicker(dpicker);
                    academic_form.find('#id_end_date').datepicker(dpicker);
                    academic_form.find('#id_status').change(academic_status_change);
                    academic_form.insertAfter($('#academic_form'));
                    $('.form-row #academic-form-0').submit(function(e){update_academic(this,e)});
                });

            //Training
                function update_training(_this,e){
                    $this = $(_this);
                        // alert('submitting');
                        e.preventDefault();
                        // Clear Error Highlights before SUbmission
                        $this.find('.error-list').remove();
                        $this.find('.has-error').removeClass('has-error');
                        // Parse data for submission
                        var formdata = $this.serializeArray();
                        formdata.push({'name':'isPublic','value':false})
                        // Disable buttons
                        $this.find('.btn').html('<i class="fa fa-pulse fa-spinner fa-lg "></i> Please Wait');
                        $this.find('.btn').prop('disabled',true);
                        $this.find('.btn').removeClass('disabled');
                        id = $this.data('id');
                        if(!id){
                            id=0;
                        }
                        formdata.push({'name':'id','value':id})
                        // Send Ajax request
                    $.ajax({
                        url:'/ajax/validate_training_form/',
                        type:'post',
                        data:formdata,
                        complete: function(data){
                            $this.find('.btn-info').html('<i class="fa fa-check-circle fa-lg"></i> Save and Update');
                            $this.find('.btn-default').html('<i class="fa fa-chevron-circle-left fa-lg"></i> Cancel');
                            $this.find('.btn').prop('disabled',false);
                            $this.find('.btn').removeClass('disabled');
                        },
                        success: function(data){
                            console.log(data);
                            if(data.success == true){
                                if(id>0){
                                    q = '.training-form-'+id
                                    $(q).collapse('toggle');
                                    $row = $(q + ':not(.form-row)');
                                    $row.find('.training_name').html($this.find('#id_name').val());
                                    $row.find('.training_description').html($this.find('#id_description').val());
                                }
                                else {
                                    name = $this.find('#id_name').val()
                                    description = $this.find('#id_description').val()
                                    html =  '<div class="row training-form-'+data.id+' collapse fade in">'+
                                            '<div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20">'+
                                                '<h4 class="pl15 pr15">'+
                                                    '<i class="fa fa-certificate"></i> <span class="training_name">'+name+'</span>'+
                                                    ' | <small>'+
                                                        '<a data-toggle="collapse" data-target=".training-form-'+data.id+'" class="clickable">Update</a>'+
                                                        ' - '+
                                                        '<a class="clickable remove-card" data-card=".training-form-'+data.id+'" data-card-type="training"> Remove</a>'+
                                                    '</small>'+
                                                '</h4>'+
                                                '<div class="container-fluid">'+
                                                    '<div class="row">'+
                                                        '<div class="col-md-12">'+
                                                            '<p class="training_description">'+description+'</p>'+
                                                        '</div>'+
                                                    '</div>'+
                                                '</div>'+
                                            '</div>'+
                                        '</div> ';
                                    $card = $(html).insertBefore($this.parent());
                                    $this.attr('data-id',data.id);
                                    $this.attr('action',$this.attr('action')+data.id+'/');
                                    $this.attr('id','training-form-'+data.id);
                                    $card.find('.remove-card').click(function(){removeCard(this);});
                                    $this.parent().removeClass('training-form-0 in');
                                    $this.parent().addClass('training-form-'+data.id);
                                    $this.find('.form-destruct').unbind('click');
                                    $this.find('.form-destruct').attr('data-toggle','collapse');
                                    $this.find('.form-destruct').attr('data-target','.training-form-'+data.id);
                                    $this.find('.form-destruct').removeClass('form-destruct');
                                    $('.add_training_form').show();
                                }
                                window.location.hash = '#training-section';
                                alert(data.msg);
                            }
                            else {
                                //Show error
                                if ('name' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_name]');
                                    console.log(data.errors.name)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_name').parents('.form-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.name).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('description' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_description]');
                                    console.log(data.errors.description)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_description').parents('.form-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.description).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                            }   
                        },
                        error: function(e){
                            console.log(e);
                        }
                    });
                    return false;
                }
                $('form[id^=training-form]').submit(function(e){update_training(this,e)});
                $('.add_training_form').click(function(){
                    $(this).hide();
                    training_form = $('#training_form').clone();
                    training_form.attr('id','');
                    training_form.addClass('in form-row');
                    training_form.find('.form-destruct').click(function(){
                        if($(this).hasClass('form-destruct')){
                            add = $(this).parents('section').find('.form-add');
                            discardform(this,add);
                        }
                    });
                    training_form.insertAfter($('#training_form'));
                    $('.form-row #training-form-0').submit(function(e){update_training(this,e)});
                });

            //Certificate

                function update_certificate(_this,e){
                    $this = $(_this);
                    // alert('submitting');
                    e.preventDefault();

                    // Clear Error Highlights before SUbmission
                    $this.find('.error-list').remove();
                    $this.find('.has-error').removeClass('has-error');

                    // Parse data for submission
                    var formdata = $this.serializeArray();
                    formdata.push({'name':'isPublic','value':false})

                    // Disable buttons
                    $this.find('.btn').html('<i class="fa fa-pulse fa-spinner fa-lg "></i> Please Wait');
                    $this.find('.btn').prop('disabled',true);
                    $this.find('.btn').removeClass('disabled');
                    id = $this.data('id');
                    if(!id){
                        id=0;
                    }
                    formdata.push({'name':'id','value':id})

                    // Send Ajax request
                    $.ajax({
                        url:'/ajax/validate_certificate_form/',
                        type:'post',
                        data:formdata,
                        complete: function(data){
                            $this.find('.btn-info').html('<i class="fa fa-check-circle fa-lg"></i> Save and Update');
                            $this.find('.btn-default').html('<i class="fa fa-chevron-circle-left fa-lg"></i> Cancel');
                            $this.find('.btn').prop('disabled',false);
                            $this.find('.btn').removeClass('disabled');
                        },
                        success: function(data){
                            console.log(data);
                            if(data.success == true){
                                if(id>0){
                                    q = '.certificate-form-'+id
                                    $(q).collapse('toggle');
                                    $row = $(q + ':not(.form-row)');
                                    $row.find('.certificate_name').html($this.find('#id_name').val());
                                    $row.find('.certificate_description').html($this.find('#id_description').val());
                                }
                                else {
                                    // q='.certificate-form-0:not(';
                                    // $(q).collapse('toggle');
                                    // $this = $(q);
                                    name = $this.find('#id_name').val()
                                    description = $this.find('#id_description').val()
                                    html =  '<div class="row certificate-form-'+data.id+' collapse fade in">'+
                                            '<div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20">'+
                                                '<h4 class="pl15 pr15">'+
                                                    '<i class="fa fa-certificate"></i> <span class="certificate_name">'+name+'</span>'+
                                                    ' | <small>'+
                                                        '<a data-toggle="collapse" data-target=".certificate-form-'+data.id+'" class="clickable">Update</a>'+
                                                        ' - '+
                                                        '<a class="clickable remove-card" data-card=".certificate-form-'+data.id+'" data-card-type="certificate"> Remove</a>'+
                                                        '</a>'+
                                                    '</small>'+
                                                '</h4>'+
                                                '<div class="container-fluid">'+
                                                    '<div class="row">'+
                                                        '<div class="col-md-12">'+
                                                            '<p class="certificate_description">'+description+'</p>'+
                                                        '</div>'+
                                                    '</div>'+
                                                '</div>'+
                                            '</div>'+
                                        '</div> ';
                                    $card = $(html).insertBefore($this.parent());
                                    $this.attr('data-id',data.id);
                                    $this.attr('action',$this.attr('action')+data.id+'/');
                                    $this.attr('id','certificate-form-'+data.id);
                                    $card.find('.remove-card').click(function(){removeCard(this);});
                                    $this.parent().removeClass('certificate-form-0 in');
                                    $this.parent().addClass('certificate-form-'+data.id);
                                    $this.find('.form-destruct').unbind('click');
                                    $this.find('.form-destruct').attr('data-toggle','collapse');
                                    $this.find('.form-destruct').attr('data-target','.certificate-form-'+data.id);
                                    $this.find('.form-destruct').removeClass('form-destruct');
                                    $('.add_certificate_form').show();
                                }
                                window.location.hash = '#certificate-section';
                                alert(data.msg);
                            }
                            else {
                                //Show error
                                if ('name' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_name]');
                                    console.log(data.errors.name)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_name').parents('.form-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.name).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('description' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_description]');
                                    console.log(data.errors.description)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_description').parents('.form-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.description).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                            }   
                        },
                        error: function(e){
                            console.log(e);
                        }
                    });
                    return false;
                }
                $('form[id^=certificate-form]').submit(function(e){update_certificate(this,e)});
                $('.add_certificate_form').click(function(){
                    $(this).hide();
                    certificate_form = $('#certificate_form').clone();
                    certificate_form.attr('id','');
                    certificate_form.addClass('in form-row');
                    certificate_form.find('.form-destruct').click(function(){
                        if($(this).hasClass('form-destruct')){
                            add = $(this).parents('section').find('.form-add');
                            discardform(this,add);
                        }
                    });
                    certificate_form.insertAfter($('#certificate_form'));
                    $('.form-row #certificate-form-0').submit(function(e){update_certificate(this,e)});
                });

            //Project

                function update_project(_this,e){
                    $this = $(_this);
                    // alert('submitting');
                    e.preventDefault();

                    // Clear Error Highlights before SUbmission
                    $this.find('.error-list').remove();
                    $this.find('.has-error').removeClass('has-error');

                    // Parse data for submission
                    var formdata = $this.serializeArray();
                    formdata.push({'name':'isPublic','value':false})

                    // Disable buttons
                    $this.find('.btn').html('<i class="fa fa-pulse fa-spinner fa-lg "></i> Please Wait');
                    $this.find('.btn').prop('disabled',true);
                    $this.find('.btn').removeClass('disabled');
                    id = $this.data('id');
                    if(!id){
                        id=0;
                    }
                    formdata.push({'name':'id','value':id})

                    // Send Ajax request
                    $.ajax({
                        url:'/ajax/validate_project_form/',
                        type:'post',
                        data:formdata,
                        complete: function(data){
                            $this.find('.btn-info').html('<i class="fa fa-check-circle fa-lg"></i> Save and Update');
                            $this.find('.btn-default').html('<i class="fa fa-chevron-circle-left fa-lg"></i> Cancel');
                            $this.find('.btn').prop('disabled',false);
                            $this.find('.btn').removeClass('disabled');
                        },
                        success: function(data){
                            console.log(data);
                            if(data.success == true){
                                if(id>0){
                                    q = '.project-form-'+id
                                    $(q).collapse('toggle');
                                    $row = $(q + ':not(.form-row)');
                                    $row.find('.project_name').html($this.find('#id_name').val());
                                    $row.find('.project_description').html($this.find('#id_description').val());
                                }
                                else {
                                    // q='.project-form-0:not(';
                                    // $(q).collapse('toggle');
                                    // $this = $(q);
                                    name = $this.find('#id_name').val()
                                    description = $this.find('#id_description').val()
                                    html =  '<div class="row project-form-'+data.id+' collapse fade in">'+
                                            '<div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20">'+
                                                '<h4 class="pl15 pr15">'+
                                                    '<i class="fa fa-certificate"></i> <span class="project_name">'+name+'</span>'+
                                                    ' | <small>'+
                                                        '<a data-toggle="collapse" data-target=".project-form-'+data.id+'" class="clickable">Update</a>'+
                                                        ' - '+
                                                        '<a class="clickable remove-card" data-card=".project-form-'+data.id+'" data-card-type="project"> Remove</a>'+
                                                        '</a>'+
                                                    '</small>'+
                                                '</h4>'+
                                                '<div class="container-fluid">'+
                                                    '<div class="row">'+
                                                        '<div class="col-md-12">'+
                                                            '<p class="project_description">'+description+'</p>'+
                                                        '</div>'+
                                                    '</div>'+
                                                '</div>'+
                                            '</div>'+
                                        '</div> ';
                                    $card = $(html).insertBefore($this.parent());
                                    $this.attr('data-id',data.id);
                                    $this.attr('action',$this.attr('action')+data.id+'/');
                                    $this.attr('id','project-form-'+data.id);
                                    $card.find('.remove-card').click(function(){removeCard(this);});
                                    $this.parent().removeClass('project-form-0 in');
                                    $this.parent().addClass('project-form-'+data.id);
                                    $this.find('.form-destruct').unbind('click');
                                    $this.find('.form-destruct').attr('data-toggle','collapse');
                                    $this.find('.form-destruct').attr('data-target','.project-form-'+data.id);
                                    $this.find('.form-destruct').removeClass('form-destruct');
                                    $('.add_project_form').show();
                                }
                                window.location.hash = '#project-section';
                                alert(data.msg);
                            }
                            else {
                                //Show error
                                if ('name' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_name]');
                                    console.log(data.errors.name)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_name').parents('.form-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.name).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('description' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_description]');
                                    console.log(data.errors.description)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_description').parents('.form-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.description).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                            }   
                        },
                        error: function(e){
                            console.log(e);
                        }
                    });
                    return false;
                }
                $('form[id^=project-form]').submit(function(e){update_project(this,e)});
                $('.add_project_form').click(function(){
                    $(this).hide();
                    project_form = $('#project_form').clone();
                    project_form.attr('id','');
                    project_form.addClass('in form-row');
                    project_form.find('.form-destruct').click(function(){
                        if($(this).hasClass('form-destruct')){
                            add = $(this).parents('section').find('.form-add');
                            discardform(this,add);
                        }
                    });
                    project_form.insertAfter($('#project_form'));
                    $('.form-row #project-form-0').submit(function(e){update_project(this,e)});
                });

            //Language
                function update_language(_this,e){
                    $this = $(_this);
                    // alert('submitting');
                    e.preventDefault();

                    // Clear Error Highlights before SUbmission
                    $this.find('.error-list').remove();
                    $this.find('.has-error').removeClass('has-error');

                    // Parse data for submission
                    var formdata = $this.serializeArray();
                    formdata.push({'name':'isPublic','value':false})
                    console.log(formdata)

                    // Disable buttons
                    $this.find('.btn').html('<i class="fa fa-pulse fa-spinner fa-lg "></i> Please Wait');
                    $this.find('.btn').prop('disabled',true);
                    $this.find('.btn').removeClass('disabled');
                    id = $this.data('id');
                    if(!id){
                        id=0;
                    }
                    formdata.push({'name':'id','value':id})

                    // Send Ajax request
                    $.ajax({
                        url:'/ajax/validate_language_form/',
                        type:'post',
                        data:formdata,
                        complete: function(data){
                            $this.find('.btn-info').html('<i class="fa fa-check-circle fa-lg"></i> Save and Update');
                            $this.find('.btn-default').html('<i class="fa fa-chevron-circle-left fa-lg"></i> Cancel');
                            $this.find('.btn').prop('disabled',false);
                            $this.find('.btn').removeClass('disabled');
                        },
                        success: function(data){
                            console.log(data);
                            if(data.success == true){
                                if(id>0){
                                    q = '.language-form-'+id
                                    $(q).collapse('toggle');
                                    $row = $(q + ':not(.form-row)');
                                    $row.find('.language_name').html($this.find('#id_language option:selected').text());
                                    level = []
                                    if ($this.find('#id_read')[0].checked){
                                        level.push('Read')
                                    }
                                    if ($this.find('#id_write')[0].checked){
                                        level.push('Write')
                                    }
                                    if ($this.find('#id_speak')[0].checked){
                                        level.push('Speak')
                                    }
                                    level = level.join();
                                    $row.find('.language_level').html(level);
                                    
                                }
                                else{
                                    level = []
                                    if ($this.find('#id_read')[0].checked){
                                        level.push('Read')
                                    }
                                    if ($this.find('#id_write')[0].checked){
                                        level.push('Write')
                                    }
                                    if ($this.find('#id_speak')[0].checked){
                                        level.push('Speak')
                                    }
                                    level = level.join();
                                    html = '<div class="row language-form-'+data.id+' collapse fade in">'+
                                                '<div class="container-fluid bg-white border-bottom border-light br-2 pt20 pb20 pr20 pl20">'+
                                                    '<h4 class="pl15 pr15">'+
                                                        '<i class="fa fa-language"></i> <span class="language_name">'+$this.find('#id_language option:selected').text()+'</span>'+
                                                        ' | <small>'+
                                                            '<a data-toggle="collapse" data-target=".language-form-'+data.id+'" class="clickable">Update</a>'+
                                                            ' - '+
                                                            '<a class="clickable remove-card" data-card=".language-form-'+data.id+'" data-card-type="language"> Remove</a>'+
                                                        '<small class="pull-right"><i class="fa fa-flag-checkered"></i> <span class="language_level">'+level+'</span></small>'+
                                                    '</h4>'+
                                                '</div>'+
                                            '</div>';
                                    $card = $(html).insertBefore($this.parent());
                                    $this.attr('data-id',data.id);
                                    $this.attr('action',$this.attr('action')+data.id+'/');
                                    $this.parent().removeClass('language-form-0 in');
                                    $this.parent().addClass('language-form-'+data.id);
                                    $this.attr('id','language-form-'+data.id);
                                    $card.find('.remove-card').click(function(){removeCard(this);});
                                    $this.find('.form-destruct').unbind('click');
                                    $this.find('.form-destruct').attr('data-toggle','collapse');
                                    $this.find('.form-destruct').attr('data-target','.language-form-'+data.id);
                                    $this.find('.form-destruct').removeClass('form-destruct');
                                    $('.add_language_form').show();
                                }
                                window.location.hash = '#language-section';
                                alert(data.msg);
                            }
                            else {
                                //Show error
                                if ('language' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_name]');
                                    console.log(data.errors.name)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_name').parents('.form-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.name).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('read' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_read]');
                                    console.log(data.errors.read)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_read').parents('.form-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.read).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('write' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_write]');
                                    console.log(data.errors.write)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_write').parents('.form-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.write).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                                if ('speak' in data.errors)
                                {
                                    html = "<ul class = 'error-list text-danger'></ul>"
                                    label = $this.find('[for=id_speak]');
                                    console.log(data.errors.speak)
                                    $elist = $(html).insertAfter($(label).next());
                                    $this.find('#id_speak').parents('.form-group').addClass('has-error')
                                    console.log($elist)
                                    $(data.errors.speak).each(function(k,v){
                                        $elist.append('<li>'+v+'</li>');
                                        // $this.find(
                                    });
                                }
                            }   
                        },
                        error: function(e){
                            console.log(e);
                        }
                    });
                    return false;
                }
                $('form[id^=language-form]').submit(function(e){update_language(this,e)});
                $('.add_language_form').click(function(){
                    $(this).hide();
                    language_form = $('#language_form').clone();
                    language_form.attr('id','');
                    language_form.addClass('in form-row');
                    language_form.find('.form-destruct').click(function(){
                        if($(this).hasClass('form-destruct')){
                            add = $(this).parents('section').find('.form-add');
                            discardform(this,add);
                        }
                    });
                    language_form.insertAfter($('#language_form'));
                    $('.form-row #language-form-0').submit(function(e){update_language(this,e)});
                });

        /*End Validation*/
        function checkforsurvivors($this){
            // console.log($this.find('.form-row').length)
            if($this.find('.form-row').length == 0){
                $this.find('.no-card').collapse('show')
            }
        }
        $('.form-add').click(function(){
            $(this).parents('section').find('.no-card').collapse('hide');
        })
        
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js"></script>
    {% if curriculum.pdf_file %}
    <script>
        var options = {
                height: "100vh",
                                pdfOpenParams: {
                    pagemode: 'thumbs'
                }
            };
        PDFObject.embed( "{{curriculum.pdf_file.url}}", "#pdf_preview", options );
    </script>
    {% endif %}
{% endblock %}